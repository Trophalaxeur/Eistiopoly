<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Correction des TPs: Référence du fichier traitement.h</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Généré par Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Page&nbsp;principale</span></a></li>
    <li><a href="namespaces.html"><span>Espaces de nommage</span></a></li>
    <li><a href="classes.html"><span>Structures&nbsp;de&nbsp;données</span></a></li>
    <li id="current"><a href="files.html"><span>Fichiers</span></a></li>
    <li><a href="dirs.html"><span>Répertoires</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;Rechercher&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>Liste&nbsp;des&nbsp;fichiers</span></a></li>
    <li><a href="globals.html"><span>Portée&nbsp;globale</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_29932c9e61c1edccbd0d816e8877d227.html">traitement</a></div>
<h1>Référence du fichier traitement.h</h1>en tete des fonctions de traitement. <a href="#_details">Plus de détails...</a>
<p>

<p>
<a href="traitement_8h-source.html">Aller au code source de ce fichier.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Fonctions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#00fa44e91ea147802f626fed5c5a5e54">lancer_des</a> (SDL_Surface *surf_ecran, SDL_Surface *surf_centre, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur, <a class="el" href="structcases.html">cases</a> **plateau)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">fonction chargée de simuler le lancement des dés  <a href="#00fa44e91ea147802f626fed5c5a5e54"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#5c76676806c77b8f28d8a2af3922f3a6">avancer_jeton</a> (SDL_Surface *surf_ecran, SDL_Surface *surf_centre, int int_nb_tire, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur, <a class="el" href="structcases.html">cases</a> **plateau, <a class="el" href="structinformation.html">information</a> *bureau_de_krystel[16], <a class="el" href="structinformation.html">information</a> *bureau_de_nadege[16])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">avance le jeton case par case, traite le passage par la case départ  <a href="#5c76676806c77b8f28d8a2af3922f3a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#e7669eea6f59aeac459a2d4a42229a00">jeu</a> (SDL_Surface *surf_ecran, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur_encours, <a class="el" href="structcases.html">cases</a> **plateau, int nombre_joueur, <a class="el" href="structinformation.html">information</a> *bureau_de_krystel[16], <a class="el" href="structinformation.html">information</a> *bureau_de_nadege[16])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialise le jeu  <a href="#e7669eea6f59aeac459a2d4a42229a00"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#92076f8887242815786ee757fa20f20c">aller_a_jeton</a> (SDL_Surface *surf_ecran, SDL_Surface *surf_centre, int int_position_voulue, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur, <a class="el" href="structcases.html">cases</a> **plateau, <a class="el" href="structinformation.html">information</a> *bureau_de_krystel[16], <a class="el" href="structinformation.html">information</a> *bureau_de_nadege[16], int delai)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">avance le jeton case par case, traite le passage par la case départ  <a href="#92076f8887242815786ee757fa20f20c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#179b66f3e6586b6640e89be8fa1f86f0">aller_en_prison_jeton</a> (SDL_Surface *surf_ecran, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur, <a class="el" href="structcases.html">cases</a> **plateau)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">envoi le joueur directement en prison  <a href="#179b66f3e6586b6640e89be8fa1f86f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#f11f5db54dce465104914610020b7786">reculer_jeton</a> (SDL_Surface *surf_ecran, SDL_Surface *surf_centre, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur, <a class="el" href="structcases.html">cases</a> **plateau, <a class="el" href="structinformation.html">information</a> *bureau_de_krystel[16], <a class="el" href="structinformation.html">information</a> *bureau_de_nadege[16])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">recule le joueur de 3 cases  <a href="#f11f5db54dce465104914610020b7786"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#b6da656c373c936678350f563de01833">traitement_case_depart</a> (SDL_Surface *surf_ecran, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ajoute l'argent au joueur  <a href="#b6da656c373c936678350f563de01833"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#d4919760c6ef767d1bc6112c6f9bbf7a">traitement_rachat_hypotheque</a> (<a class="el" href="structjoueur.html">joueur</a> *joueur_actuel, <a class="el" href="structcases.html">cases</a> *case_hypothequee)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">rachète une hypothèque  <a href="#d4919760c6ef767d1bc6112c6f9bbf7a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#c3994350d2c8dbdcb995c7354c788c88">traitement_mise_en_hypotheque</a> (<a class="el" href="structjoueur.html">joueur</a> *joueur_actuel, <a class="el" href="structcases.html">cases</a> *case_hypothequee)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">met en place une hypothèque  <a href="#c3994350d2c8dbdcb995c7354c788c88"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#c348a8e35a81c8d0e00e947478e06fb6">traitement_payer_loyer</a> (<a class="el" href="structjoueur.html">joueur</a> *joueur_qui_paye, <a class="el" href="structjoueur.html">joueur</a> *joueur_paye, int int_montant)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">paye les loyer d'une salle  <a href="#c348a8e35a81c8d0e00e947478e06fb6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#75826dfc26c45fb35071e334a0d1a6a6">traitement_loyer_lieu_commun</a> (<a class="el" href="structjoueur.html">joueur</a> *pj_joueur)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">calcul le loyer pour les lieux communs  <a href="#75826dfc26c45fb35071e334a0d1a6a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#bdfc1ebd2d8ecfcd5d3b01937f529839">traitement_loyer_association</a> (<a class="el" href="structjoueur.html">joueur</a> *joueur_paye, int int_nb_tire)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">calcul le loyer d'une association  <a href="#bdfc1ebd2d8ecfcd5d3b01937f529839"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#dd1dfecf4b64b55e60fe041d2616ac95">traitement_achat</a> (<a class="el" href="structcases.html">cases</a> *case_achetee, <a class="el" href="structjoueur.html">joueur</a> *joueur_actuel)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">traitement l'achat d'une propriété  <a href="#dd1dfecf4b64b55e60fe041d2616ac95"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#e2926eec46d90cac351a92593d9e61ca">traitement_augmentation_niveau</a> (<a class="el" href="structcases.html">cases</a> *pcase, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">augmente le niveau d'une case  <a href="#e2926eec46d90cac351a92593d9e61ca"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#fd826ff98ce317d815964eba125ad0bc">traitement_diminution_niveau</a> (<a class="el" href="structcases.html">cases</a> *pcase, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">diminue le niveau d'une case  <a href="#fd826ff98ce317d815964eba125ad0bc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#d4adf76b1576cb838f47fee69e533563">traitement_arrive_case</a> (SDL_Surface *surf_ecran, SDL_Surface *surf_centre, <a class="el" href="structcases.html">cases</a> **plateau, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur, <a class="el" href="structinformation.html">information</a> *bureau_de_krystel[16], <a class="el" href="structinformation.html">information</a> *bureau_de_nadege[16], int int_nombre_tire)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">effectue les action necessaire lors de l'arrivée sur une case en fonction de son type  <a href="#d4adf76b1576cb838f47fee69e533563"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#12c087ef5d94868443731b4c92032e14">traitement_elimination_joueur</a> (<a class="el" href="structjoueur.html">joueur</a> *joueur_eliminer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">libère les propriété et l'espace mémoire du joueur et de ses possessions  <a href="#12c087ef5d94868443731b4c92032e14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#af4566e5dd13d5a2ecc63bb86ddd8567">traitement_machine_a_cafe</a> (SDL_Surface *surf_ecran, SDL_Surface *surf_centre, <a class="el" href="structcases.html">cases</a> **plateau, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">donne au joueur l'argent de la machine à café  <a href="#af4566e5dd13d5a2ecc63bb86ddd8567"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#be19ec4331bcef51ef67b4a083f5f1db">traitement_bureau</a> (SDL_Surface *surf_ecran, SDL_Surface *surf_centre, <a class="el" href="structcases.html">cases</a> **plateau, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur, <a class="el" href="structinformation.html">information</a> *le_bureau[16], <a class="el" href="structinformation.html">information</a> *bureau_de_krystel[16], <a class="el" href="structinformation.html">information</a> *bureau_de_nadege[16], int int_id_bureau)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">tire une carte du bureau voulue et effectue le traitement en fonction de la carte tirée  <a href="#be19ec4331bcef51ef67b4a083f5f1db"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#41c5c48babb69e4ed2112ea2b4b4135f">traitement_soiree</a> (SDL_Surface *surf_ecran, SDL_Surface *surf_centre, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur, <a class="el" href="structcases.html">cases</a> **plateau)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">fait payer le joueur suivant la case soirée sur laquelle il est  <a href="#41c5c48babb69e4ed2112ea2b4b4135f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#254f5e87b0380c79a01aaf444c6aff9e">traitement_bureau_laurence</a> (SDL_Surface *surf_ecran, SDL_Surface *surf_centre, <a class="el" href="structcases.html">cases</a> **plateau, <a class="el" href="structjoueur.html">joueur</a> *pj_joueur, <a class="el" href="structinformation.html">information</a> *bureau_de_krystel[16], <a class="el" href="structinformation.html">information</a> *bureau_de_nadege[16])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">effectue les traitement necessaire lorsqu'un joueur est dans le bureau de laurence  <a href="#254f5e87b0380c79a01aaf444c6aff9e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="traitement_8h.html#f8722e066ea3e80427909d9efbe1b0b6">traitement_perdu</a> (<a class="el" href="structjoueur.html">joueur</a> *pj_joueur)</td></tr>

</table>
<hr><a name="_details"></a><h2>Description détaillée</h2>
en tete des fonctions de traitement. 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt; </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>09/01/2006 </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>

<p>
Définition dans le fichier <a class="el" href="traitement_8h-source.html">traitement.h</a>.<hr><h2>Documentation des fonctions</h2>
<a class="anchor" name="00fa44e91ea147802f626fed5c5a5e54"></a><!-- doxytag: member="traitement.h::lancer_des" ref="00fa44e91ea147802f626fed5c5a5e54" args="(SDL_Surface *surf_ecran, SDL_Surface *surf_centre, joueur *pj_joueur, cases **plateau)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lancer_des           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_centre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
fonction chargée de simuler le lancement des dés 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>surf_centre</em>&nbsp;</td><td>surface centrale du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>le nombre obtenue par les dés </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00106">106</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="interaction_8c-source.html#l00011">attente_clic()</a>, et <a class="el" href="traitement_8c-source.html#l00821">traitement_bureau_laurence()</a>.<div class="fragment"><pre class="fragment"><a name="l00107"></a>00107 {
<a name="l00108"></a>00108   <span class="keywordtype">int</span> int_1; <span class="comment">//valeur du premier dé</span>
<a name="l00109"></a>00109   <span class="keywordtype">int</span> int_2; <span class="comment">//valeur du second dé</span>
<a name="l00110"></a>00110   <span class="keywordtype">int</span> int_rebond1; <span class="comment">//nb de rebonds du premier dé</span>
<a name="l00111"></a>00111   <span class="keywordtype">int</span> int_rebond2; <span class="comment">//nb de rebonds du second dé</span>
<a name="l00112"></a>00112   
<a name="l00113"></a>00113   <span class="keywordtype">int</span> i=0;
<a name="l00114"></a>00114   
<a name="l00115"></a>00115   SDL_Surface** surf_des;
<a name="l00116"></a>00116   
<a name="l00117"></a>00117   <span class="comment">//calcul du nombre de rebond du premier dé</span>
<a name="l00118"></a>00118   int_rebond1=rand()%10+5;
<a name="l00119"></a>00119   
<a name="l00120"></a>00120   <span class="comment">//calcul de nombre de rebond du second dé</span>
<a name="l00121"></a>00121   int_rebond2=rand()%10+5;
<a name="l00122"></a>00122   
<a name="l00123"></a>00123   <span class="comment">//initialisation a 0 des deux dés</span>
<a name="l00124"></a>00124   int_1=0;
<a name="l00125"></a>00125   int_2=0;
<a name="l00126"></a>00126   
<a name="l00127"></a>00127   surf_des=<a class="code" href="sdl_8c.html#bc1cdf56ae3b532e71353fba4dc5f51f">creation_des</a>();
<a name="l00128"></a>00128   
<a name="l00129"></a>00129   <span class="keywordflow">if</span> (int_rebond1 &gt; int_rebond2)
<a name="l00130"></a>00130   {
<a name="l00131"></a>00131     <span class="keywordflow">while</span> (i &lt; int_rebond2)
<a name="l00132"></a>00132     {
<a name="l00133"></a>00133       int_1=(rand()%6)+1;
<a name="l00134"></a>00134       int_2=(rand()%6)+1;
<a name="l00135"></a>00135   
<a name="l00136"></a>00136       <a class="code" href="sdl_8c.html#1ec83ae30cba581d2675dfb5f858efe4">affich_panneau_des</a>(surf_ecran,surf_des,int_1,int_2);
<a name="l00137"></a>00137       SDL_Delay(<a class="code" href="constante_8h.html#62249e384b997229a3e2ae74ade334e2">DELAY</a>);
<a name="l00138"></a>00138       i++;
<a name="l00139"></a>00139     }
<a name="l00140"></a>00140     <span class="keywordflow">for</span>(i=0;i&lt;(int_rebond1-int_rebond2-1);i++)
<a name="l00141"></a>00141     {
<a name="l00142"></a>00142       int_1=(rand()%6)+1;
<a name="l00143"></a>00143     
<a name="l00144"></a>00144       <a class="code" href="sdl_8c.html#1ec83ae30cba581d2675dfb5f858efe4">affich_panneau_des</a>(surf_ecran,surf_des,int_1,int_2);
<a name="l00145"></a>00145       SDL_Delay(<a class="code" href="constante_8h.html#62249e384b997229a3e2ae74ade334e2">DELAY</a>);
<a name="l00146"></a>00146     }
<a name="l00147"></a>00147   }
<a name="l00148"></a>00148   <span class="keywordflow">else</span>
<a name="l00149"></a>00149   {
<a name="l00150"></a>00150     <span class="keywordflow">while</span> (i &lt; int_rebond1)
<a name="l00151"></a>00151     {
<a name="l00152"></a>00152       int_1=(rand()%6)+1;
<a name="l00153"></a>00153       int_2=(rand()%6)+1;
<a name="l00154"></a>00154   
<a name="l00155"></a>00155       <a class="code" href="sdl_8c.html#1ec83ae30cba581d2675dfb5f858efe4">affich_panneau_des</a>(surf_ecran,surf_des,int_1,int_2);  
<a name="l00156"></a>00156       SDL_Delay(<a class="code" href="constante_8h.html#62249e384b997229a3e2ae74ade334e2">DELAY</a>);
<a name="l00157"></a>00157       i++;
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159     <span class="keywordflow">for</span>(i=0;i&lt;(int_rebond1-int_rebond2-1);i++)
<a name="l00160"></a>00160     {
<a name="l00161"></a>00161       int_1=(rand()%6)+1;
<a name="l00162"></a>00162     
<a name="l00163"></a>00163       <a class="code" href="sdl_8c.html#1ec83ae30cba581d2675dfb5f858efe4">affich_panneau_des</a>(surf_ecran,surf_des,int_1,int_2);
<a name="l00164"></a>00164       SDL_Delay(<a class="code" href="constante_8h.html#62249e384b997229a3e2ae74ade334e2">DELAY</a>);
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166   }
<a name="l00167"></a>00167   <span class="keywordflow">if</span> (int_1==int_2)
<a name="l00168"></a>00168   {
<a name="l00169"></a>00169     pj_joueur-&gt;<a class="code" href="structjoueur.html#383352e8bd61fe737ca01b2ad37da4a4">int_double_tire</a>++;
<a name="l00170"></a>00170   }
<a name="l00171"></a>00171   <span class="keywordflow">else</span> 
<a name="l00172"></a>00172   {
<a name="l00173"></a>00173     pj_joueur-&gt;<a class="code" href="structjoueur.html#383352e8bd61fe737ca01b2ad37da4a4">int_double_tire</a>=0;
<a name="l00174"></a>00174   }
<a name="l00175"></a>00175   
<a name="l00176"></a>00176   <span class="comment">//si le joueur a fait 3 doubles il va en prison</span>
<a name="l00177"></a>00177   <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#383352e8bd61fe737ca01b2ad37da4a4">int_double_tire</a> == 3)
<a name="l00178"></a>00178   {
<a name="l00179"></a>00179     <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran, surf_centre, <span class="stringliteral">"PRISON"</span> , <span class="stringliteral">"Vous avez fait 3 doubles consecutif"</span>, <a class="code" href="constante_8h.html#053cae792dc14f665c1787b2f12b2759">MESSAGE_NORMAL</a>);
<a name="l00180"></a>00180     <a class="code" href="traitement_8c.html#179b66f3e6586b6640e89be8fa1f86f0">aller_en_prison_jeton</a>(surf_ecran, pj_joueur,plateau);
<a name="l00181"></a>00181     pj_joueur-&gt;<a class="code" href="structjoueur.html#383352e8bd61fe737ca01b2ad37da4a4">int_double_tire</a> = 0;
<a name="l00182"></a>00182   }
<a name="l00183"></a>00183     
<a name="l00184"></a>00184   <a class="code" href="sdl_8c.html#5f0ca65fa2d890a4e600402ecfeecf2a">destruction_des</a>(surf_des);
<a name="l00185"></a>00185   <span class="keywordflow">return</span>(int_1+int_2);
<a name="l00186"></a>00186 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5c76676806c77b8f28d8a2af3922f3a6"></a><!-- doxytag: member="traitement.h::avancer_jeton" ref="5c76676806c77b8f28d8a2af3922f3a6" args="(SDL_Surface *surf_ecran, SDL_Surface *surf_centre, int int_nb_tire, joueur *pj_joueur, cases **plateau, information *bureau_de_krystel[16], information *bureau_de_nadege[16])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avancer_jeton           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_centre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>int_nb_tire</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_krystel</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_nadege</em>[16]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
avance le jeton case par case, traite le passage par la case départ 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>surf_centre</em>&nbsp;</td><td>surface centrale du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int_nb_tire</em>&nbsp;</td><td>nombre obtenu lors du lancer des dés </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_krystel</em>&nbsp;</td><td>tableau des cartes bureau de krystel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_nadege</em>&nbsp;</td><td>tableau des cartes bureau de nadège</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00233">233</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="interaction_8c-source.html#l00011">attente_clic()</a>, et <a class="el" href="traitement_8c-source.html#l00821">traitement_bureau_laurence()</a>.<div class="fragment"><pre class="fragment"><a name="l00234"></a>00234 {
<a name="l00235"></a>00235   <span class="keywordtype">int</span> int_position;
<a name="l00236"></a>00236   <span class="keywordtype">int</span> int_position2;
<a name="l00237"></a>00237   
<a name="l00238"></a>00238   <a class="code" href="structjoueur.html">joueur</a>* pj_joueur_test;
<a name="l00239"></a>00239   
<a name="l00240"></a>00240   <span class="comment">//on le fait avancer case par case</span>
<a name="l00241"></a>00241   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;int_nb_tire;i++)
<a name="l00242"></a>00242   {
<a name="l00243"></a>00243     <span class="comment">//on réactualise la case ou se trouve le joueur afin qu'il efface le jeton</span>
<a name="l00244"></a>00244     <a class="code" href="sdl_8c.html#4e3b1c5bc7ed1be6722ca01a2789e758">affich_case</a>(surf_ecran,plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00245"></a>00245     <span class="comment">//on avance le joueur de 1 en faisant attention que la position reste dans les 40 cases du plateau</span>
<a name="l00246"></a>00246     pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>=(pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>+1)%40;
<a name="l00247"></a>00247     <span class="comment">//on compte le nombre de personne sur la case ou doit être afficher le joueur actuel</span>
<a name="l00248"></a>00248     int_position=<a class="code" href="outils_8c.html#628b8ba74e55cbdc77d8c2e5e594bc8e">nombre_joueur_case</a>(pj_joueur);
<a name="l00249"></a>00249     <span class="comment">//on affiche le joueur sur la nouvelle case</span>
<a name="l00250"></a>00250     <a class="code" href="sdl_8c.html#6b7f77ae67e59ddecb20065c14b04efe">affich_joueur</a>(surf_ecran, pj_joueur,int_position+1, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00251"></a>00251     <span class="comment">// on lui indique que le premier joueur test est le suivant</span>
<a name="l00252"></a>00252     pj_joueur_test=pj_joueur-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00253"></a>00253     int_position2=0;
<a name="l00254"></a>00254     <span class="comment">//on verifie pour chaque joueur s'il se trouvait là où était le joueur avant</span>
<a name="l00255"></a>00255     <span class="keywordflow">while</span> (pj_joueur_test != pj_joueur)
<a name="l00256"></a>00256     {
<a name="l00257"></a>00257       <span class="keywordflow">if</span> (pj_joueur_test-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>==((pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>)-1))
<a name="l00258"></a>00258       {
<a name="l00259"></a>00259         int_position2++;
<a name="l00260"></a>00260         <span class="comment">//on l'affiche sur la case:</span>
<a name="l00261"></a>00261         <a class="code" href="sdl_8c.html#6b7f77ae67e59ddecb20065c14b04efe">affich_joueur</a>(surf_ecran, pj_joueur_test,int_position2, plateau[pj_joueur_test-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00262"></a>00262       }
<a name="l00263"></a>00263       pj_joueur_test=pj_joueur_test-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00264"></a>00264     }
<a name="l00265"></a>00265     <span class="comment">//on rafraichi l'affichage</span>
<a name="l00266"></a>00266     SDL_Flip(surf_ecran);
<a name="l00267"></a>00267     <span class="comment">//petit delay pour que l'utilisateur puisse apprécier l'affichage</span>
<a name="l00268"></a>00268     SDL_Delay(<a class="code" href="constante_8h.html#62249e384b997229a3e2ae74ade334e2">DELAY</a>);
<a name="l00269"></a>00269     
<a name="l00270"></a>00270     <span class="comment">//si il se trouve sur la case départ </span>
<a name="l00271"></a>00271     <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>==0)
<a name="l00272"></a>00272     {
<a name="l00273"></a>00273       <span class="comment">//on effectue le traitement adequat</span>
<a name="l00274"></a>00274       <a class="code" href="traitement_8c.html#b6da656c373c936678350f563de01833">traitement_case_depart</a> (surf_ecran,pj_joueur);
<a name="l00275"></a>00275     }
<a name="l00276"></a>00276   } 
<a name="l00277"></a>00277   <a class="code" href="traitement_8c.html#d4adf76b1576cb838f47fee69e533563">traitement_arrive_case</a>(surf_ecran, surf_centre,plateau,pj_joueur, bureau_de_krystel, bureau_de_nadege, int_nb_tire);
<a name="l00278"></a>00278 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e7669eea6f59aeac459a2d4a42229a00"></a><!-- doxytag: member="traitement.h::jeu" ref="e7669eea6f59aeac459a2d4a42229a00" args="(SDL_Surface *surf_ecran, joueur *pj_joueur_encours, cases **plateau, int nombre_joueur, information *bureau_de_krystel[16], information *bureau_de_nadege[16])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jeu           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur_encours</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nombre_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_krystel</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_nadege</em>[16]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
initialise le jeu 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur_encours</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nombre_joueur</em>&nbsp;</td><td>nombre de joueurs qui jouent </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_krystel</em>&nbsp;</td><td>tableau des cartes bureau de krystel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_nadege</em>&nbsp;</td><td>tableau des cartes bureau de nadège</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00012">12</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="monopoly_8c-source.html#l00013">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00013"></a>00013 {
<a name="l00014"></a>00014   <span class="keywordtype">int</span> i;
<a name="l00015"></a>00015   
<a name="l00016"></a>00016   <span class="comment">//Valeur de retour</span>
<a name="l00017"></a>00017   <span class="keywordtype">int</span> int_retour;
<a name="l00018"></a>00018   
<a name="l00019"></a>00019   <span class="comment">//Surface du centre</span>
<a name="l00020"></a>00020   SDL_Surface* surf_centre = NULL;
<a name="l00021"></a>00021   
<a name="l00022"></a>00022   <span class="comment">//Création du centre</span>
<a name="l00023"></a>00023   surf_centre=SDL_LoadBMP(<span class="stringliteral">"sdl/images/logo.bmp"</span>);
<a name="l00024"></a>00024 
<a name="l00025"></a>00025   <span class="comment">//Affichage des cases du plateau</span>
<a name="l00026"></a>00026   <span class="keywordflow">for</span>(i=0;i&lt;40;i++) <a class="code" href="sdl_8c.html#4e3b1c5bc7ed1be6722ca01a2789e758">affich_case</a>(surf_ecran, plateau[i]);
<a name="l00027"></a>00027   
<a name="l00028"></a>00028   <span class="comment">//joueur_possede_tout(plateau, pj_joueur_encours);                         //&lt;&lt;&lt;================================== POUR ESSAYER LA MODIFICATION DE NIVEAU RAPIDEMENT</span>
<a name="l00029"></a>00029     
<a name="l00030"></a>00030   <span class="comment">//on affiche les joueurs sur la cases depart</span>
<a name="l00031"></a>00031   <a class="code" href="sdl_8c.html#ede4b283ece193d76b1061a3ebdb19cf">affich_joueur_depart</a> (surf_ecran,plateau,pj_joueur_encours,nombre_joueur);
<a name="l00032"></a>00032   <span class="comment">//Affichage du centre</span>
<a name="l00033"></a>00033   <a class="code" href="sdl_8c.html#f14fe728c96d62787df648810e3288c7">affich_centre</a>(surf_ecran, surf_centre);
<a name="l00034"></a>00034 
<a name="l00035"></a>00035   <span class="comment">//Affichage du panneau du menu</span>
<a name="l00036"></a>00036   <a class="code" href="sdl_8c.html#9bf1846eae0f7207f11fa6ba5f55115c">affich_panneau_menu</a>(surf_ecran,0);
<a name="l00037"></a>00037   
<a name="l00038"></a>00038   <span class="comment">//Affichage du panneau contenant les informations du premier joueur</span>
<a name="l00039"></a>00039   <a class="code" href="sdl_8c.html#495f90890052e1cad5f7ad447627e6ec">affich_panneau_joueur</a>(surf_ecran,pj_joueur_encours);
<a name="l00040"></a>00040   
<a name="l00041"></a>00041   <span class="comment">//Affichage du panneau du bouton lancer dés</span>
<a name="l00042"></a>00042   <a class="code" href="sdl_8c.html#9af391caac0ca5797ffd9cb84b04b860">affich_panneau_des_bouton</a>(surf_ecran,0);
<a name="l00043"></a>00043   
<a name="l00044"></a>00044   <span class="comment">//Affichage du panneau de fin de tour</span>
<a name="l00045"></a>00045   <a class="code" href="sdl_8c.html#073bdb2b8f511320c7066db35a452185">affich_panneau_fdt</a>(surf_ecran,<span class="keyword">false</span>);
<a name="l00046"></a>00046   
<a name="l00047"></a>00047   <span class="comment">//Affichage contenant les informations sur les possessions du joueur</span>
<a name="l00048"></a>00048   <a class="code" href="sdl_8c.html#83fed3d7a65d02378d31795cab19b73d">affich_panneau_possessions</a>(surf_ecran,pj_joueur_encours);
<a name="l00049"></a>00049   
<a name="l00050"></a>00050   <span class="comment">//Attente du premier événement souris</span>
<a name="l00051"></a>00051   int_retour=<a class="code" href="interaction_8c.html#ceef01ee631e6d4f4a515f599e04dd2e">attente_clic</a>(surf_ecran, surf_centre, pj_joueur_encours,plateau,bureau_de_krystel,bureau_de_nadege);
<a name="l00052"></a>00052   <span class="keywordflow">if</span>(int_retour==0)
<a name="l00053"></a>00053   {
<a name="l00054"></a>00054     int_retour=<a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran, surf_centre, NULL, <span class="stringliteral">"Etes vous sûr de vouloir réellement envisager l'idée de la possibilité que vous puissiez avoir envie de quitter ce programme sans avoir effleurer l'idée d'une possible sauvegarde de la partie ?"</span>, <a class="code" href="constante_8h.html#49f9cd47df9117797cc86e55461562b0">MESSAGE_QUITTER</a>);
<a name="l00055"></a>00055 
<a name="l00056"></a>00056   }
<a name="l00057"></a>00057   <span class="comment">//Tant que le joueur ne décide pas de quitter</span>
<a name="l00058"></a>00058   <span class="keywordflow">while</span>(int_retour)
<a name="l00059"></a>00059   {
<a name="l00060"></a>00060     <span class="comment">//si le joueur n'a pas fait de double on passe au joueur suivant</span>
<a name="l00061"></a>00061     <span class="keywordflow">if</span> (pj_joueur_encours-&gt;<a class="code" href="structjoueur.html#383352e8bd61fe737ca01b2ad37da4a4">int_double_tire</a> == 0)
<a name="l00062"></a>00062     {
<a name="l00063"></a>00063       <span class="comment">//Passage au joueur suivant</span>
<a name="l00064"></a>00064       pj_joueur_encours=pj_joueur_encours-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00065"></a>00065     } 
<a name="l00066"></a>00066     
<a name="l00067"></a>00067     <span class="comment">//on affiche le panneau du nouveau joueur</span>
<a name="l00068"></a>00068     <a class="code" href="sdl_8c.html#495f90890052e1cad5f7ad447627e6ec">affich_panneau_joueur</a>(surf_ecran,pj_joueur_encours);
<a name="l00069"></a>00069     <span class="comment">//Affichage du cache pour le panneau des possession</span>
<a name="l00070"></a>00070     <a class="code" href="sdl_8c.html#c6da71ddb898e1d2fdc238b7cec7d65e">affich_possessions_cache</a>(surf_ecran);
<a name="l00071"></a>00071     <span class="comment">//On réaffiche le panneau des possessions</span>
<a name="l00072"></a>00072     <a class="code" href="sdl_8c.html#83fed3d7a65d02378d31795cab19b73d">affich_panneau_possessions</a>(surf_ecran,pj_joueur_encours);
<a name="l00073"></a>00073     <span class="comment">//Affichage du panneau du bouton lancer dés</span>
<a name="l00074"></a>00074     <a class="code" href="sdl_8c.html#9af391caac0ca5797ffd9cb84b04b860">affich_panneau_des_bouton</a>(surf_ecran,0);
<a name="l00075"></a>00075     <span class="comment">//Mise à jour de l'écran</span>
<a name="l00076"></a>00076     SDL_Flip(surf_ecran);
<a name="l00077"></a>00077     <span class="comment">//Attente d'un événement souris</span>
<a name="l00078"></a>00078     int_retour=<a class="code" href="interaction_8c.html#ceef01ee631e6d4f4a515f599e04dd2e">attente_clic</a>(surf_ecran, surf_centre, pj_joueur_encours, plateau, bureau_de_krystel, bureau_de_nadege);
<a name="l00079"></a>00079     <span class="comment">//Si le joueur souhaite quitter</span>
<a name="l00080"></a>00080     <span class="keywordflow">if</span>(int_retour==0)
<a name="l00081"></a>00081     {
<a name="l00082"></a>00082       <span class="comment">//Demande de confirmation d'action</span>
<a name="l00083"></a>00083       int_retour=<a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran, surf_centre, NULL, <span class="stringliteral">"Etes vous sûr de vouloir réellement envisager l'idée de la possibilité que vous puissiez avoir envie de quitter ce programme sans avoir effleurer l'idée d'une possible sauvegarde de la partie ?"</span>, <a class="code" href="constante_8h.html#49f9cd47df9117797cc86e55461562b0">MESSAGE_QUITTER</a>);
<a name="l00084"></a>00084       <span class="comment">//Si le joueur demande de sauvegarder</span>
<a name="l00085"></a>00085       <span class="keywordflow">if</span>(int_retour==3)
<a name="l00086"></a>00086       {
<a name="l00087"></a>00087         <span class="comment">//On sauvegarde</span>
<a name="l00088"></a>00088         <a class="code" href="outils_8c.html#113ece66046fa3db3fed49a3ada1b36e">sauvegarde</a>(plateau, pj_joueur_encours);
<a name="l00089"></a>00089         <span class="comment">//Message de confirmation de sauvegarde</span>
<a name="l00090"></a>00090         <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran, surf_centre, <span class="stringliteral">"Sauvegarde"</span>, <span class="stringliteral">"La sauvegarde à été effectué avec un très grand succès ! Toutes nos félicitations. (Il ne peut n'y avoir qu'un seul fichier de sauvegarde. Toute nouvelle sauvegarde écrase la précédente.)"</span>,<a class="code" href="constante_8h.html#053cae792dc14f665c1787b2f12b2759">MESSAGE_NORMAL</a>);
<a name="l00091"></a>00091         <span class="comment">//Fin du jeu</span>
<a name="l00092"></a>00092         int_retour=0;
<a name="l00093"></a>00093       }
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095     <span class="comment">//on vérifie que le joueur n'a pas gagné</span>
<a name="l00096"></a>00096     <span class="keywordflow">if</span>(<a class="code" href="outils_8c.html#f24e5d6a3c8482c890219439e48dfe74">verification_victoire</a>(pj_joueur_encours))
<a name="l00097"></a>00097     {
<a name="l00098"></a>00098       <span class="comment">//Message de victoire</span>
<a name="l00099"></a>00099       <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"VICTOIRE"</span>, <span class="stringliteral">"Félicitation vous avez ruiné tous vos adversaires !"</span>,<a class="code" href="constante_8h.html#053cae792dc14f665c1787b2f12b2759">MESSAGE_NORMAL</a>);
<a name="l00100"></a>00100       <span class="comment">//Fin du jeu</span>
<a name="l00101"></a>00101       int_retour=0;
<a name="l00102"></a>00102     }
<a name="l00103"></a>00103   }
<a name="l00104"></a>00104 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="92076f8887242815786ee757fa20f20c"></a><!-- doxytag: member="traitement.h::aller_a_jeton" ref="92076f8887242815786ee757fa20f20c" args="(SDL_Surface *surf_ecran, SDL_Surface *surf_centre, int int_position_voulue, joueur *pj_joueur, cases **plateau, information *bureau_de_krystel[16], information *bureau_de_nadege[16], int delai)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aller_a_jeton           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_centre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>int_position_voulue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_krystel</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_nadege</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>delai</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
avance le jeton case par case, traite le passage par la case départ 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>surf_centre</em>&nbsp;</td><td>surface du centre du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int_position_voulue</em>&nbsp;</td><td>position voulue </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_krystel</em>&nbsp;</td><td>tableau des cartes bureau de krystel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_nadege</em>&nbsp;</td><td>tableau des cartes bureau de nadège </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>delai</em>&nbsp;</td><td>délai du déplacement entre deux cases</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00280">280</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00888">traitement_bureau()</a>.<div class="fragment"><pre class="fragment"><a name="l00281"></a>00281 {
<a name="l00282"></a>00282   <span class="keywordtype">int</span> int_position;
<a name="l00283"></a>00283   <span class="keywordtype">int</span> int_position2;
<a name="l00284"></a>00284   <a class="code" href="structjoueur.html">joueur</a>* pj_joueur_test;
<a name="l00285"></a>00285   
<a name="l00286"></a>00286   <span class="comment">//on le fait avancer case par case  </span>
<a name="l00287"></a>00287   <span class="keywordflow">while</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a> != int_position_voulue)
<a name="l00288"></a>00288   {
<a name="l00289"></a>00289     <span class="comment">//on réactualise la case ou se trouve le joueur afin qu'il efface le jeton</span>
<a name="l00290"></a>00290     <a class="code" href="sdl_8c.html#4e3b1c5bc7ed1be6722ca01a2789e758">affich_case</a>(surf_ecran,plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00291"></a>00291     <span class="comment">//on avance le joueur de 1 en faisant attention que la position reste dans les 40 cases du plateau</span>
<a name="l00292"></a>00292     pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>=(pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>+1)%40;
<a name="l00293"></a>00293     <span class="comment">//on compte le nombre de personne sur la case ou doit être afficher le joueur actuel</span>
<a name="l00294"></a>00294     int_position=<a class="code" href="outils_8c.html#628b8ba74e55cbdc77d8c2e5e594bc8e">nombre_joueur_case</a>(pj_joueur);
<a name="l00295"></a>00295     <span class="comment">//on affiche le joueur sur la nouvelle case</span>
<a name="l00296"></a>00296     <a class="code" href="sdl_8c.html#6b7f77ae67e59ddecb20065c14b04efe">affich_joueur</a>(surf_ecran, pj_joueur, int_position+1, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00297"></a>00297     
<a name="l00298"></a>00298     <span class="comment">// on lui indique que le premier joueur test est le suivant</span>
<a name="l00299"></a>00299     pj_joueur_test=pj_joueur-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00300"></a>00300     int_position2=0;
<a name="l00301"></a>00301     <span class="comment">//on verifie pour chaque joueur s'il se trouvait là où était le joueur avant</span>
<a name="l00302"></a>00302     <span class="keywordflow">while</span> (pj_joueur_test != pj_joueur)
<a name="l00303"></a>00303     {
<a name="l00304"></a>00304       <span class="keywordflow">if</span> (pj_joueur_test-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>==((pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>)-1))
<a name="l00305"></a>00305       {
<a name="l00306"></a>00306         int_position2++;
<a name="l00307"></a>00307         <span class="comment">//on l'affiche sur la case:</span>
<a name="l00308"></a>00308         <a class="code" href="sdl_8c.html#6b7f77ae67e59ddecb20065c14b04efe">affich_joueur</a>(surf_ecran, pj_joueur_test,int_position2, plateau[pj_joueur_test-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00309"></a>00309       }
<a name="l00310"></a>00310       pj_joueur_test=pj_joueur_test-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00311"></a>00311     }
<a name="l00312"></a>00312     <span class="comment">//on rafraichi l'affichage</span>
<a name="l00313"></a>00313     SDL_Flip(surf_ecran);
<a name="l00314"></a>00314     <span class="comment">//petit delay pour que l'utilisateur puisse apprécier l'affichage</span>
<a name="l00315"></a>00315     SDL_Delay(delai);
<a name="l00316"></a>00316     <span class="comment">//si il se trouve sur la case départ </span>
<a name="l00317"></a>00317     <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>==0)
<a name="l00318"></a>00318     {
<a name="l00319"></a>00319       <span class="comment">//on effectue le traitement adequat</span>
<a name="l00320"></a>00320       <a class="code" href="traitement_8c.html#b6da656c373c936678350f563de01833">traitement_case_depart</a> (surf_ecran,pj_joueur);
<a name="l00321"></a>00321     }
<a name="l00322"></a>00322   }
<a name="l00323"></a>00323   <span class="comment">//on lance la fonction traitement associé à la case ou il s'arrete</span>
<a name="l00324"></a>00324   <span class="comment">//plateau[pj_joueur-&gt;int_position]-&gt;ptraitement(pj_joueur-&gt;int_position);</span>
<a name="l00325"></a>00325   
<a name="l00326"></a>00326   <a class="code" href="traitement_8c.html#d4adf76b1576cb838f47fee69e533563">traitement_arrive_case</a>(surf_ecran, surf_centre,plateau,pj_joueur, bureau_de_krystel, bureau_de_nadege, 0);
<a name="l00327"></a>00327 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="179b66f3e6586b6640e89be8fa1f86f0"></a><!-- doxytag: member="traitement.h::aller_en_prison_jeton" ref="179b66f3e6586b6640e89be8fa1f86f0" args="(SDL_Surface *surf_ecran, joueur *pj_joueur, cases **plateau)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aller_en_prison_jeton           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
envoi le joueur directement en prison 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00329">329</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00106">lancer_des()</a>, <a class="el" href="traitement_8c-source.html#l00694">traitement_arrive_case()</a>, et <a class="el" href="traitement_8c-source.html#l00888">traitement_bureau()</a>.<div class="fragment"><pre class="fragment"><a name="l00330"></a>00330 {
<a name="l00331"></a>00331   <span class="keywordtype">int</span> int_position;
<a name="l00332"></a>00332   <span class="keywordtype">int</span> int_position2;
<a name="l00333"></a>00333   
<a name="l00334"></a>00334   <a class="code" href="structjoueur.html">joueur</a>* pj_joueur_test;
<a name="l00335"></a>00335 
<a name="l00336"></a>00336   
<a name="l00337"></a>00337   <span class="comment">//on réactualise la case ou se trouve le joueur afin qu'il efface le jeton</span>
<a name="l00338"></a>00338   <a class="code" href="sdl_8c.html#4e3b1c5bc7ed1be6722ca01a2789e758">affich_case</a>(surf_ecran,plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00339"></a>00339   
<a name="l00340"></a>00340   <span class="comment">// on lui indique que le premier joueur test est le suivant</span>
<a name="l00341"></a>00341   pj_joueur_test=pj_joueur-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00342"></a>00342   int_position2=0;
<a name="l00343"></a>00343   <span class="comment">//on verifie pour chaque joueur s'il se trouvait là où était le joueur avant</span>
<a name="l00344"></a>00344   <span class="keywordflow">while</span> (pj_joueur_test != pj_joueur)
<a name="l00345"></a>00345   {
<a name="l00346"></a>00346     <span class="keywordflow">if</span> (pj_joueur_test-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>==((pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>)-1))
<a name="l00347"></a>00347     {
<a name="l00348"></a>00348       int_position2++;
<a name="l00349"></a>00349       <span class="comment">//on l'affiche sur la case:</span>
<a name="l00350"></a>00350       <a class="code" href="sdl_8c.html#6b7f77ae67e59ddecb20065c14b04efe">affich_joueur</a>(surf_ecran, pj_joueur_test,int_position2, plateau[pj_joueur_test-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00351"></a>00351     }
<a name="l00352"></a>00352     pj_joueur_test=pj_joueur_test-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00353"></a>00353   }
<a name="l00354"></a>00354   
<a name="l00355"></a>00355   <span class="comment">//on envoi le jeton directement en prison</span>
<a name="l00356"></a>00356   pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>=10;
<a name="l00357"></a>00357   <span class="comment">//on indique qu'il est emprisonner</span>
<a name="l00358"></a>00358   pj_joueur-&gt;<a class="code" href="structjoueur.html#9674676a40014e7c313f37a481b70bb4">bool_laurence</a>=<span class="keyword">true</span>;
<a name="l00359"></a>00359   
<a name="l00360"></a>00360   <span class="comment">//on compte le nombre de personne sur la case ou doit être afficher le joueur actuel</span>
<a name="l00361"></a>00361   int_position=<a class="code" href="outils_8c.html#628b8ba74e55cbdc77d8c2e5e594bc8e">nombre_joueur_case</a>(pj_joueur);
<a name="l00362"></a>00362   
<a name="l00363"></a>00363   <span class="comment">//on affiche le joueur sur la nouvelle case</span>
<a name="l00364"></a>00364   <a class="code" href="sdl_8c.html#6b7f77ae67e59ddecb20065c14b04efe">affich_joueur</a>(surf_ecran, pj_joueur, int_position+1, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00365"></a>00365   
<a name="l00366"></a>00366   <span class="comment">//on rafraichi l'affichage</span>
<a name="l00367"></a>00367   SDL_Flip(surf_ecran);
<a name="l00368"></a>00368 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f11f5db54dce465104914610020b7786"></a><!-- doxytag: member="traitement.h::reculer_jeton" ref="f11f5db54dce465104914610020b7786" args="(SDL_Surface *surf_ecran, SDL_Surface *surf_centre, joueur *pj_joueur, cases **plateau, information *bureau_de_krystel[16], information *bureau_de_nadege[16])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reculer_jeton           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_centre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_krystel</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_nadege</em>[16]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
recule le joueur de 3 cases 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>surf_centre</em>&nbsp;</td><td>surface centrale du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_krystel</em>&nbsp;</td><td>tableau des cartes bureau de krystel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_nadege</em>&nbsp;</td><td>tableau des cartes bureau de nadège</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00188">188</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00888">traitement_bureau()</a>.<div class="fragment"><pre class="fragment"><a name="l00189"></a>00189 {
<a name="l00190"></a>00190   <span class="keywordtype">int</span> int_position;
<a name="l00191"></a>00191   <span class="keywordtype">int</span> int_position2;
<a name="l00192"></a>00192   <span class="keywordtype">int</span> i;
<a name="l00193"></a>00193   
<a name="l00194"></a>00194   i=0;
<a name="l00195"></a>00195   
<a name="l00196"></a>00196   <a class="code" href="structjoueur.html">joueur</a>* pj_joueur_test;
<a name="l00197"></a>00197   
<a name="l00198"></a>00198   <span class="comment">//on le fait avancer case par case</span>
<a name="l00199"></a>00199   <span class="keywordflow">for</span> (i=0;i&lt;3;i++)
<a name="l00200"></a>00200   {
<a name="l00201"></a>00201     <span class="comment">//on réactualise la case ou se trouve le joueur afin qu'il efface le jeton</span>
<a name="l00202"></a>00202     <a class="code" href="sdl_8c.html#4e3b1c5bc7ed1be6722ca01a2789e758">affich_case</a>(surf_ecran,plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00203"></a>00203     <span class="comment">//on avance le joueur de 1 en faisant attention que la position reste dans les 40 cases du plateau</span>
<a name="l00204"></a>00204     pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>=(pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>+39)%40;
<a name="l00205"></a>00205     <span class="comment">//on compte le nombre de personne sur la case ou doit être afficher le joueur actuel</span>
<a name="l00206"></a>00206     int_position=<a class="code" href="outils_8c.html#628b8ba74e55cbdc77d8c2e5e594bc8e">nombre_joueur_case</a>(pj_joueur);
<a name="l00207"></a>00207     <span class="comment">//on affiche le joueur sur la nouvelle case</span>
<a name="l00208"></a>00208     <a class="code" href="sdl_8c.html#6b7f77ae67e59ddecb20065c14b04efe">affich_joueur</a>(surf_ecran, pj_joueur,int_position+1, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00209"></a>00209     <span class="comment">// on lui indique que le premier joueur test est le suivant</span>
<a name="l00210"></a>00210     pj_joueur_test=pj_joueur-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00211"></a>00211     int_position2=0;
<a name="l00212"></a>00212     <span class="comment">//on verifie pour chaque joueur s'il se trouvait là où était le joueur avant</span>
<a name="l00213"></a>00213     <span class="keywordflow">while</span> (pj_joueur_test != pj_joueur)
<a name="l00214"></a>00214     {
<a name="l00215"></a>00215       <span class="keywordflow">if</span> (pj_joueur_test-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>==((pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>)-1))
<a name="l00216"></a>00216       {
<a name="l00217"></a>00217         int_position2++;
<a name="l00218"></a>00218         <span class="comment">//on l'affiche sur la case:</span>
<a name="l00219"></a>00219         <a class="code" href="sdl_8c.html#6b7f77ae67e59ddecb20065c14b04efe">affich_joueur</a>(surf_ecran, pj_joueur_test,int_position2, plateau[pj_joueur_test-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]);
<a name="l00220"></a>00220       }
<a name="l00221"></a>00221       pj_joueur_test=pj_joueur_test-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223     <span class="comment">//on rafraichi l'affichage</span>
<a name="l00224"></a>00224     SDL_Flip(surf_ecran);
<a name="l00225"></a>00225     <span class="comment">//petit delay pour que l'utilisateur puisse apprécier l'affichage</span>
<a name="l00226"></a>00226     SDL_Delay(<a class="code" href="constante_8h.html#62249e384b997229a3e2ae74ade334e2">DELAY</a>);
<a name="l00227"></a>00227   }
<a name="l00228"></a>00228   
<a name="l00229"></a>00229   <a class="code" href="traitement_8c.html#d4adf76b1576cb838f47fee69e533563">traitement_arrive_case</a>(surf_ecran, surf_centre,plateau,pj_joueur, bureau_de_krystel, bureau_de_nadege, 0);
<a name="l00230"></a>00230 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b6da656c373c936678350f563de01833"></a><!-- doxytag: member="traitement.h::traitement_case_depart" ref="b6da656c373c936678350f563de01833" args="(SDL_Surface *surf_ecran, joueur *pj_joueur)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traitement_case_depart           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
ajoute l'argent au joueur 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00434">434</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00280">aller_a_jeton()</a>, et <a class="el" href="traitement_8c-source.html#l00233">avancer_jeton()</a>.<div class="fragment"><pre class="fragment"><a name="l00435"></a>00435 {
<a name="l00436"></a>00436   <span class="comment">//on ajoute 2000 Fintz au compte du joueur</span>
<a name="l00437"></a>00437   pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>)+2000;
<a name="l00438"></a>00438   pj_joueur-&gt;<a class="code" href="structjoueur.html#3007bbdde3256a72f4c1980d73f400e1">bool_debut</a>=<span class="keyword">false</span>;
<a name="l00439"></a>00439 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d4919760c6ef767d1bc6112c6f9bbf7a"></a><!-- doxytag: member="traitement.h::traitement_rachat_hypotheque" ref="d4919760c6ef767d1bc6112c6f9bbf7a" args="(joueur *joueur_actuel, cases *case_hypothequee)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traitement_rachat_hypotheque           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>joueur_actuel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> *&nbsp;</td>
          <td class="paramname"> <em>case_hypothequee</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
rachète une hypothèque 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>joueur_actuel</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>case_hypothequee</em>&nbsp;</td><td>indice de la case à déshypothéquer</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>booléen indiquant si la fonction c'est bien dérouler </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00582">582</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.<div class="fragment"><pre class="fragment"><a name="l00583"></a>00583 {
<a name="l00584"></a>00584   <span class="comment">//on agit selon le type de la case</span>
<a name="l00585"></a>00585   <span class="keywordflow">switch</span> (case_hypothequee-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a>)
<a name="l00586"></a>00586   {
<a name="l00587"></a>00587     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#4e266faa65b920356441404c5c423272">SALLE</a>:
<a name="l00588"></a>00588       <span class="comment">//si le joueur a assez d'argent</span>
<a name="l00589"></a>00589       <span class="keywordflow">if</span> (joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= case_hypothequee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_valeur_hypotheque*0.10)
<a name="l00590"></a>00590       {
<a name="l00591"></a>00591       <span class="comment">//il rachete l'hypothèque</span>
<a name="l00592"></a>00592       joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(int)(joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> - (case_hypothequee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_valeur_hypotheque*0.10));
<a name="l00593"></a>00593       case_hypothequee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.bool_hypotheque=<span class="keyword">false</span>;
<a name="l00594"></a>00594       }
<a name="l00595"></a>00595       <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00596"></a>00596       <span class="keywordflow">break</span>;
<a name="l00597"></a>00597             
<a name="l00598"></a>00598     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#c4176015f152fb7416bc61129a3825f7">BDS</a>:
<a name="l00599"></a>00599       <span class="comment">//si le joueur a assez d'argent</span>
<a name="l00600"></a>00600       <span class="keywordflow">if</span> (joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= (case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque*0.10))
<a name="l00601"></a>00601       {
<a name="l00602"></a>00602       <span class="comment">//il rachete l'hypothèque</span>
<a name="l00603"></a>00603       joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(int)(joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> - (case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque*0.10));
<a name="l00604"></a>00604       case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.bool_hypotheque=<span class="keyword">false</span>;
<a name="l00605"></a>00605       }
<a name="l00606"></a>00606       <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00607"></a>00607       <span class="keywordflow">break</span>;    
<a name="l00608"></a>00608     
<a name="l00609"></a>00609     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#0ad5592728506d2c7a17844fa23df7d8">BDE</a>:
<a name="l00610"></a>00610       <span class="comment">//si le joueur a assez d'argent</span>
<a name="l00611"></a>00611       <span class="keywordflow">if</span> (joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= (case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque*0.10))
<a name="l00612"></a>00612       {
<a name="l00613"></a>00613       <span class="comment">//il rachete l'hypothèque</span>
<a name="l00614"></a>00614       joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(int)(joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> - (case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque*0.10));
<a name="l00615"></a>00615       case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.bool_hypotheque=<span class="keyword">false</span>;
<a name="l00616"></a>00616       }
<a name="l00617"></a>00617       <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00618"></a>00618       <span class="keywordflow">break</span>;  
<a name="l00619"></a>00619       
<a name="l00620"></a>00620     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#d6374d072f3b90625b387149b6059452">LC_WC</a>:
<a name="l00621"></a>00621       <span class="comment">//si le joueur a assez d'argent</span>
<a name="l00622"></a>00622       <span class="keywordflow">if</span> (joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;=(case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque*0.10))
<a name="l00623"></a>00623       {
<a name="l00624"></a>00624       <span class="comment">//il rachete l'hypothèque</span>
<a name="l00625"></a>00625       joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(int)(joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> - (case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque*0.10));
<a name="l00626"></a>00626       case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque=<span class="keyword">false</span>;
<a name="l00627"></a>00627       }
<a name="l00628"></a>00628       <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00629"></a>00629       <span class="keywordflow">break</span>;
<a name="l00630"></a>00630       
<a name="l00631"></a>00631     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#fffd46a61b11e88ee78aadff949e1f4d">LC_ASCENSEUR</a>:
<a name="l00632"></a>00632       <span class="comment">//si le joueur a assez d'argent</span>
<a name="l00633"></a>00633       <span class="keywordflow">if</span> (joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= (case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque*0.10))
<a name="l00634"></a>00634       {
<a name="l00635"></a>00635       <span class="comment">//il rachete l'hypothèque</span>
<a name="l00636"></a>00636       joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(int)(joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> - (case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque*0.10));
<a name="l00637"></a>00637       case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque=<span class="keyword">false</span>;
<a name="l00638"></a>00638       }
<a name="l00639"></a>00639       <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00640"></a>00640       <span class="keywordflow">break</span>;
<a name="l00641"></a>00641             
<a name="l00642"></a>00642     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#9b30d8e1e34829a936da477e94b5e376">LC_RU</a>:
<a name="l00643"></a>00643       <span class="comment">//si le joueur a assez d'argent</span>
<a name="l00644"></a>00644       <span class="keywordflow">if</span> (joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= (case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque*0.10))
<a name="l00645"></a>00645       {
<a name="l00646"></a>00646       <span class="comment">//il rachete l'hypothèque</span>
<a name="l00647"></a>00647       joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(int)(joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> - (case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque*0.10));
<a name="l00648"></a>00648       case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque=<span class="keyword">false</span>;
<a name="l00649"></a>00649       }
<a name="l00650"></a>00650       <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00651"></a>00651       <span class="keywordflow">break</span>;
<a name="l00652"></a>00652             
<a name="l00653"></a>00653     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#a55f3cedf3fd4b2510c1bb0b805facbf">LC_PARKING</a>:            
<a name="l00654"></a>00654       <span class="comment">//si le joueur a assez d'argent</span>
<a name="l00655"></a>00655       <span class="keywordflow">if</span> (joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= (case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque*0.10))
<a name="l00656"></a>00656       {
<a name="l00657"></a>00657       <span class="comment">//il rachete l'hypothèque</span>
<a name="l00658"></a>00658       joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(int)(joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> - (case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque+case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque*0.10));
<a name="l00659"></a>00659       case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque=<span class="keyword">false</span>;
<a name="l00660"></a>00660       }
<a name="l00661"></a>00661       <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00662"></a>00662       <span class="keywordflow">break</span>;
<a name="l00663"></a>00663       
<a name="l00664"></a>00664     <span class="keywordflow">default</span>:
<a name="l00665"></a>00665       <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00666"></a>00666       <span class="keywordflow">break</span>;
<a name="l00667"></a>00667   }
<a name="l00668"></a>00668   <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00669"></a>00669 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c3994350d2c8dbdcb995c7354c788c88"></a><!-- doxytag: member="traitement.h::traitement_mise_en_hypotheque" ref="c3994350d2c8dbdcb995c7354c788c88" args="(joueur *joueur_actuel, cases *case_hypothequee)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traitement_mise_en_hypotheque           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>joueur_actuel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> *&nbsp;</td>
          <td class="paramname"> <em>case_hypothequee</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
met en place une hypothèque 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>joueur_actuel</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>case_hypothequee</em>&nbsp;</td><td>indice de la case à hypothéquer</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>booléen indiquant si la fonction c'est bien dérouler </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00458">458</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.<div class="fragment"><pre class="fragment"><a name="l00459"></a>00459 {
<a name="l00460"></a>00460   <span class="comment">//on agit selon le type de la case</span>
<a name="l00461"></a>00461   <span class="keywordflow">switch</span> (case_hypothequee-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a>)
<a name="l00462"></a>00462   {
<a name="l00463"></a>00463     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#4e266faa65b920356441404c5c423272">SALLE</a>:
<a name="l00464"></a>00464       <span class="comment">//si la case n'est pas déja hypotheque</span>
<a name="l00465"></a>00465       <span class="keywordflow">if</span> (!(case_hypothequee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.bool_hypotheque))
<a name="l00466"></a>00466       {
<a name="l00467"></a>00467         joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> + case_hypothequee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_valeur_hypotheque;
<a name="l00468"></a>00468         case_hypothequee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.bool_hypotheque=<span class="keyword">true</span>;
<a name="l00469"></a>00469         <span class="keywordflow">return</span>(case_hypothequee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.bool_hypotheque);
<a name="l00470"></a>00470       }
<a name="l00471"></a>00471       <span class="keywordflow">break</span>;
<a name="l00472"></a>00472             
<a name="l00473"></a>00473     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#c4176015f152fb7416bc61129a3825f7">BDS</a>:
<a name="l00474"></a>00474       <span class="keywordflow">if</span> (!(case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.bool_hypotheque))
<a name="l00475"></a>00475       {
<a name="l00476"></a>00476         joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> + case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque;
<a name="l00477"></a>00477         case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.bool_hypotheque=<span class="keyword">true</span>;
<a name="l00478"></a>00478         <span class="keywordflow">return</span>(case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.bool_hypotheque);
<a name="l00479"></a>00479       }
<a name="l00480"></a>00480       <span class="keywordflow">break</span>;    
<a name="l00481"></a>00481     
<a name="l00482"></a>00482     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#0ad5592728506d2c7a17844fa23df7d8">BDE</a>:
<a name="l00483"></a>00483       <span class="keywordflow">if</span> (!(case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.bool_hypotheque))
<a name="l00484"></a>00484       {
<a name="l00485"></a>00485         joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> + case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_valeur_hypotheque;
<a name="l00486"></a>00486         case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.bool_hypotheque=<span class="keyword">true</span>;
<a name="l00487"></a>00487         <span class="keywordflow">return</span>(case_hypothequee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.bool_hypotheque);
<a name="l00488"></a>00488       }
<a name="l00489"></a>00489       <span class="keywordflow">break</span>;
<a name="l00490"></a>00490       
<a name="l00491"></a>00491     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#d6374d072f3b90625b387149b6059452">LC_WC</a>:
<a name="l00492"></a>00492       <span class="keywordflow">if</span> (!(case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque))
<a name="l00493"></a>00493       {
<a name="l00494"></a>00494         joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> + case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque;
<a name="l00495"></a>00495         case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque=<span class="keyword">true</span>;
<a name="l00496"></a>00496         <span class="keywordflow">return</span>(case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque);
<a name="l00497"></a>00497       }
<a name="l00498"></a>00498       <span class="keywordflow">break</span>;
<a name="l00499"></a>00499       
<a name="l00500"></a>00500     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#fffd46a61b11e88ee78aadff949e1f4d">LC_ASCENSEUR</a>:
<a name="l00501"></a>00501       <span class="keywordflow">if</span> (!(case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque))
<a name="l00502"></a>00502       {
<a name="l00503"></a>00503         joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> + case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque;
<a name="l00504"></a>00504         case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque=<span class="keyword">true</span>;
<a name="l00505"></a>00505         <span class="keywordflow">return</span>(case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque);
<a name="l00506"></a>00506       }
<a name="l00507"></a>00507       <span class="keywordflow">break</span>;
<a name="l00508"></a>00508             
<a name="l00509"></a>00509     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#9b30d8e1e34829a936da477e94b5e376">LC_RU</a>:
<a name="l00510"></a>00510       <span class="keywordflow">if</span> (!(case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque))
<a name="l00511"></a>00511       {
<a name="l00512"></a>00512         joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> + case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque;
<a name="l00513"></a>00513         case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque=<span class="keyword">true</span>;
<a name="l00514"></a>00514         <span class="keywordflow">return</span>(case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque);
<a name="l00515"></a>00515       }
<a name="l00516"></a>00516       <span class="keywordflow">break</span>;
<a name="l00517"></a>00517             
<a name="l00518"></a>00518     <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#a55f3cedf3fd4b2510c1bb0b805facbf">LC_PARKING</a>:            
<a name="l00519"></a>00519       <span class="keywordflow">if</span> (!(case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque))
<a name="l00520"></a>00520       {
<a name="l00521"></a>00521         joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> + case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_valeur_hypotheque;
<a name="l00522"></a>00522         case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque=<span class="keyword">true</span>;
<a name="l00523"></a>00523         <span class="keywordflow">return</span>(case_hypothequee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.bool_hypotheque);
<a name="l00524"></a>00524       }
<a name="l00525"></a>00525       <span class="keywordflow">break</span>;
<a name="l00526"></a>00526       
<a name="l00527"></a>00527     <span class="keywordflow">default</span>:
<a name="l00528"></a>00528       <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00529"></a>00529       <span class="keywordflow">break</span>;
<a name="l00530"></a>00530   }
<a name="l00531"></a>00531   <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00532"></a>00532 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c348a8e35a81c8d0e00e947478e06fb6"></a><!-- doxytag: member="traitement.h::traitement_payer_loyer" ref="c348a8e35a81c8d0e00e947478e06fb6" args="(joueur *joueur_qui_paye, joueur *joueur_paye, int int_montant)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traitement_payer_loyer           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>joueur_qui_paye</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>joueur_paye</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>int_montant</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
paye les loyer d'une salle 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>joueur_qui_paye</em>&nbsp;</td><td>joueur à qui on prend les sous </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>joueur_paye</em>&nbsp;</td><td>joueur à qui on donne les sous </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int_montant</em>&nbsp;</td><td>montant de la transaction</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>booléen indiquant si la fonction c'est bien dérouler </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00442">442</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00694">traitement_arrive_case()</a>.<div class="fragment"><pre class="fragment"><a name="l00443"></a>00443 {
<a name="l00444"></a>00444   <span class="comment">//si le joueur a assez d'argent</span>
<a name="l00445"></a>00445   <span class="keywordflow">if</span> (joueur_qui_paye-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= int_montant)
<a name="l00446"></a>00446   {
<a name="l00447"></a>00447     <span class="comment">//il paye</span>
<a name="l00448"></a>00448     joueur_qui_paye-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_qui_paye-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>-int_montant;
<a name="l00449"></a>00449     joueur_paye-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_paye-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>+int_montant;
<a name="l00450"></a>00450     <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00451"></a>00451   }
<a name="l00452"></a>00452   <span class="keywordflow">else</span>
<a name="l00453"></a>00453   {
<a name="l00454"></a>00454     <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00455"></a>00455   }
<a name="l00456"></a>00456 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="75826dfc26c45fb35071e334a0d1a6a6"></a><!-- doxytag: member="traitement.h::traitement_loyer_lieu_commun" ref="75826dfc26c45fb35071e334a0d1a6a6" args="(joueur *pj_joueur)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int traitement_loyer_lieu_commun           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
calcul le loyer pour les lieux communs 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur à qui on doit les sous</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>le montant du loyer </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00564">564</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="outils_8c-source.html#l00337">action_possible()</a>, et <a class="el" href="traitement_8c-source.html#l00694">traitement_arrive_case()</a>.<div class="fragment"><pre class="fragment"><a name="l00565"></a>00565 {
<a name="l00566"></a>00566   
<a name="l00567"></a>00567   <a class="code" href="structpossession.html">possession</a>* propriete_temp;
<a name="l00568"></a>00568   <span class="keywordtype">int</span> i;
<a name="l00569"></a>00569   i=0;
<a name="l00570"></a>00570 
<a name="l00571"></a>00571   propriete_temp=pj_joueur-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>;
<a name="l00572"></a>00572   
<a name="l00573"></a>00573   <span class="keywordflow">while</span>(propriete_temp!=NULL)
<a name="l00574"></a>00574   {
<a name="l00575"></a>00575     i++;
<a name="l00576"></a>00576     propriete_temp=propriete_temp-&gt;<a class="code" href="structpossession.html#d2cf0b1aadb1a869c82c6720dfbc9e36">suivant</a>;
<a name="l00577"></a>00577   }
<a name="l00578"></a>00578   
<a name="l00579"></a>00579   <span class="keywordflow">return</span>(i*250);
<a name="l00580"></a>00580 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="bdfc1ebd2d8ecfcd5d3b01937f529839"></a><!-- doxytag: member="traitement.h::traitement_loyer_association" ref="bdfc1ebd2d8ecfcd5d3b01937f529839" args="(joueur *joueur_paye, int int_nb_tire)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int traitement_loyer_association           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>joueur_paye</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>int_nb_tire</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
calcul le loyer d'une association 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>joueur_paye</em>&nbsp;</td><td>joueur à qui on doit les sous </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int_nb_tire</em>&nbsp;</td><td>nombre indiqué par le dés</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>le loyer à payer </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00534">534</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="outils_8c-source.html#l00337">action_possible()</a>, et <a class="el" href="traitement_8c-source.html#l00694">traitement_arrive_case()</a>.<div class="fragment"><pre class="fragment"><a name="l00535"></a>00535 {
<a name="l00536"></a>00536   <a class="code" href="structpossession.html">possession</a>* propriete_test;
<a name="l00537"></a>00537   <span class="keywordtype">int</span> i; <span class="comment">//compteur</span>
<a name="l00538"></a>00538   
<a name="l00539"></a>00539   i=0;
<a name="l00540"></a>00540   
<a name="l00541"></a>00541   propriete_test=joueur_paye-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>;
<a name="l00542"></a>00542   <span class="comment">//on comptabilise le nombre de case association du joueur payé</span>
<a name="l00543"></a>00543   <span class="keywordflow">while</span> (propriete_test != NULL)
<a name="l00544"></a>00544   {
<a name="l00545"></a>00545     <span class="keywordflow">if</span> ((propriete_test-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#c4176015f152fb7416bc61129a3825f7">BDS</a>) || (propriete_test-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#0ad5592728506d2c7a17844fa23df7d8">BDE</a>))
<a name="l00546"></a>00546     {
<a name="l00547"></a>00547       i++;
<a name="l00548"></a>00548     }
<a name="l00549"></a>00549     
<a name="l00550"></a>00550     propriete_test=propriete_test-&gt;<a class="code" href="structpossession.html#d2cf0b1aadb1a869c82c6720dfbc9e36">suivant</a>;
<a name="l00551"></a>00551   }
<a name="l00552"></a>00552   <span class="comment">//on a ainsi compatibilisé le nombe d'association du joueur</span>
<a name="l00553"></a>00553   <span class="comment">//si il n'y a qu'une on multiplie les nombre des dés par 40</span>
<a name="l00554"></a>00554   <span class="keywordflow">if</span> (i == 1)
<a name="l00555"></a>00555   {
<a name="l00556"></a>00556     <span class="keywordflow">return</span>(int_nb_tire*40);   
<a name="l00557"></a>00557   }
<a name="l00558"></a>00558   <span class="keywordflow">else</span> 
<a name="l00559"></a>00559   {
<a name="l00560"></a>00560     <span class="keywordflow">return</span>(int_nb_tire*100);
<a name="l00561"></a>00561   }
<a name="l00562"></a>00562 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="dd1dfecf4b64b55e60fe041d2616ac95"></a><!-- doxytag: member="traitement.h::traitement_achat" ref="dd1dfecf4b64b55e60fe041d2616ac95" args="(cases *case_achetee, joueur *joueur_actuel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traitement_achat           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> *&nbsp;</td>
          <td class="paramname"> <em>case_achetee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>joueur_actuel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
traitement l'achat d'une propriété 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>case_achetee</em>&nbsp;</td><td>indice des la case achetée </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>joueur_actuel</em>&nbsp;</td><td>l'acheteur</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>booléen qui indique si la fonction s'est bbien déroulée </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00370">370</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="interaction_8c-source.html#l00752">attente_validation_propriete()</a>, et <a class="el" href="outils_8c-source.html#l00090">joueur_possede_tout()</a>.<div class="fragment"><pre class="fragment"><a name="l00371"></a>00371 {
<a name="l00372"></a>00372   <span class="comment">//on verifie si la case n'appartient a aucun joueur</span>
<a name="l00373"></a>00373 
<a name="l00374"></a>00374   <span class="comment">//on détermine le type de la case</span>
<a name="l00375"></a>00375   <span class="keywordflow">if</span> (case_achetee-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a>==<a class="code" href="constante_8h.html#4e266faa65b920356441404c5c423272">SALLE</a>)
<a name="l00376"></a>00376   {
<a name="l00377"></a>00377     <span class="comment">//on verifie si le joueur a assez d'argent pour l'acheter et si la case n'appartient a personne</span>
<a name="l00378"></a>00378     <span class="keywordflow">if</span> ((joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= case_achetee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_prix) &amp;&amp; (case_achetee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.pjoueur_joueur==NULL))
<a name="l00379"></a>00379     {
<a name="l00380"></a>00380       <span class="comment">//on effectue la transaction</span>
<a name="l00381"></a>00381       joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>-case_achetee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_prix;
<a name="l00382"></a>00382       joueur_actuel-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>=<a class="code" href="outils_8c.html#d53767c5dbc0daa1a8de086094690eaa">insertion_bonne_place_propriete</a>(joueur_actuel-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>,case_achetee);
<a name="l00383"></a>00383       case_achetee-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.pjoueur_joueur=joueur_actuel;
<a name="l00384"></a>00384       
<a name="l00385"></a>00385       <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387     <span class="keywordflow">else</span>
<a name="l00388"></a>00388     {
<a name="l00389"></a>00389       <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00390"></a>00390     }
<a name="l00391"></a>00391   }
<a name="l00392"></a>00392   <span class="keywordflow">else</span> 
<a name="l00393"></a>00393   {
<a name="l00394"></a>00394     <span class="keywordflow">if</span>((case_achetee-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#0ad5592728506d2c7a17844fa23df7d8">BDE</a>) || (case_achetee-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#c4176015f152fb7416bc61129a3825f7">BDS</a>))
<a name="l00395"></a>00395     {
<a name="l00396"></a>00396       <span class="comment">//on verifie si le joueur a assez d'argent pour l'acheter</span>
<a name="l00397"></a>00397       <span class="keywordflow">if</span> ((joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= case_achetee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_prix) &amp;&amp; (case_achetee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur==NULL))
<a name="l00398"></a>00398       {
<a name="l00399"></a>00399         <span class="comment">//on effectue la transaction</span>
<a name="l00400"></a>00400         joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>-case_achetee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.int_prix;
<a name="l00401"></a>00401         joueur_actuel-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>=<a class="code" href="outils_8c.html#d53767c5dbc0daa1a8de086094690eaa">insertion_bonne_place_propriete</a>(joueur_actuel-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>,case_achetee);
<a name="l00402"></a>00402         case_achetee-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur=joueur_actuel;
<a name="l00403"></a>00403       
<a name="l00404"></a>00404         <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00405"></a>00405       }
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407     <span class="keywordflow">else</span>
<a name="l00408"></a>00408     {
<a name="l00409"></a>00409       <span class="keywordflow">if</span>(    (case_achetee-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#d6374d072f3b90625b387149b6059452">LC_WC</a>) 
<a name="l00410"></a>00410         || (case_achetee-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#9b30d8e1e34829a936da477e94b5e376">LC_RU</a>)
<a name="l00411"></a>00411         || (case_achetee-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#a55f3cedf3fd4b2510c1bb0b805facbf">LC_PARKING</a>)
<a name="l00412"></a>00412         || (case_achetee-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#fffd46a61b11e88ee78aadff949e1f4d">LC_ASCENSEUR</a>))
<a name="l00413"></a>00413         {
<a name="l00414"></a>00414           <span class="comment">//on verifie si le joueur a assez d'argent pour l'acheter</span>
<a name="l00415"></a>00415           <span class="keywordflow">if</span> ((joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= case_achetee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_prix) &amp;&amp; (case_achetee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur==NULL))
<a name="l00416"></a>00416           {
<a name="l00417"></a>00417             <span class="comment">//on effectue la transaction</span>
<a name="l00418"></a>00418             joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=joueur_actuel-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>-case_achetee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.int_prix;
<a name="l00419"></a>00419             joueur_actuel-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>=<a class="code" href="outils_8c.html#d53767c5dbc0daa1a8de086094690eaa">insertion_bonne_place_propriete</a>(joueur_actuel-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>,case_achetee);
<a name="l00420"></a>00420             case_achetee-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur=joueur_actuel;
<a name="l00421"></a>00421             <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00422"></a>00422           }
<a name="l00423"></a>00423           <span class="keywordflow">else</span>
<a name="l00424"></a>00424           {
<a name="l00425"></a>00425             <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00426"></a>00426           }
<a name="l00427"></a>00427         }
<a name="l00428"></a>00428       }
<a name="l00429"></a>00429     }
<a name="l00430"></a>00430     <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00431"></a>00431 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e2926eec46d90cac351a92593d9e61ca"></a><!-- doxytag: member="traitement.h::traitement_augmentation_niveau" ref="e2926eec46d90cac351a92593d9e61ca" args="(cases *pcase, joueur *pj_joueur)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traitement_augmentation_niveau           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> *&nbsp;</td>
          <td class="paramname"> <em>pcase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
augmente le niveau d'une case 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pcase</em>&nbsp;</td><td>case dont on doit changer le niveau</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>booléen indiquant si la fonction s'est bien déroulée </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00671">671</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="interaction_8c-source.html#l00752">attente_validation_propriete()</a>.<div class="fragment"><pre class="fragment"><a name="l00672"></a>00672 {
<a name="l00673"></a>00673   <span class="comment">//on vérifie si le joueur a assez d'argent</span>
<a name="l00674"></a>00674   <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &gt;= pcase-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_prix_niveau)
<a name="l00675"></a>00675   {
<a name="l00676"></a>00676     <span class="comment">//il les achète</span>
<a name="l00677"></a>00677     pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>) - (pcase-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_prix_niveau);
<a name="l00678"></a>00678     pcase-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_niveau=pcase-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_niveau + 1;
<a name="l00679"></a>00679     <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00680"></a>00680   }
<a name="l00681"></a>00681   <span class="keywordflow">else</span>
<a name="l00682"></a>00682   {
<a name="l00683"></a>00683     <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00684"></a>00684   } 
<a name="l00685"></a>00685 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="fd826ff98ce317d815964eba125ad0bc"></a><!-- doxytag: member="traitement.h::traitement_diminution_niveau" ref="fd826ff98ce317d815964eba125ad0bc" args="(cases *pcase, joueur *pj_joueur)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traitement_diminution_niveau           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> *&nbsp;</td>
          <td class="paramname"> <em>pcase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
diminue le niveau d'une case 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pcase</em>&nbsp;</td><td>case dont on doit changer le niveau</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>booléen indiquant si la fonction s'est bien déroulée </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00687">687</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="interaction_8c-source.html#l00752">attente_validation_propriete()</a>.<div class="fragment"><pre class="fragment"><a name="l00688"></a>00688 {
<a name="l00689"></a>00689     <span class="comment">//il les vend</span>
<a name="l00690"></a>00690     pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=(pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>) + ((pcase-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_prix_niveau)/2);
<a name="l00691"></a>00691     pcase-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_niveau=pcase-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_niveau - 1;
<a name="l00692"></a>00692 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d4adf76b1576cb838f47fee69e533563"></a><!-- doxytag: member="traitement.h::traitement_arrive_case" ref="d4adf76b1576cb838f47fee69e533563" args="(SDL_Surface *surf_ecran, SDL_Surface *surf_centre, cases **plateau, joueur *pj_joueur, information *bureau_de_krystel[16], information *bureau_de_nadege[16], int int_nombre_tire)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traitement_arrive_case           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_centre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_krystel</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_nadege</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>int_nombre_tire</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
effectue les action necessaire lors de l'arrivée sur une case en fonction de son type 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>surf_centre</em>&nbsp;</td><td>surface centrale du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int_nombre_tire</em>&nbsp;</td><td>nombre obtenu lors du lancer des dés </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_krystel</em>&nbsp;</td><td>tableau des cartes bureau de krystel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_nadege</em>&nbsp;</td><td>tableau des cartes bureau de nadège</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00694">694</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00280">aller_a_jeton()</a>, <a class="el" href="traitement_8c-source.html#l00233">avancer_jeton()</a>, et <a class="el" href="traitement_8c-source.html#l00188">reculer_jeton()</a>.<div class="fragment"><pre class="fragment"><a name="l00695"></a>00695 {
<a name="l00696"></a>00696   <span class="keywordtype">char</span> message[512];
<a name="l00697"></a>00697   
<a name="l00698"></a>00698   <span class="keywordtype">int</span> action_possible_resultat;
<a name="l00699"></a>00699   
<a name="l00700"></a>00700   action_possible_resultat=<a class="code" href="outils_8c.html#d1c532cdedd8b070691946cc83436c96">action_possible</a>(plateau, 0, pj_joueur, <a class="code" href="constante_8h.html#385bdcf434c8769e73b1733a2972f23c">ARRIVE_CASE</a>, int_nombre_tire);
<a name="l00701"></a>00701   
<a name="l00702"></a>00702   <span class="keywordflow">if</span>(plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a>==<a class="code" href="constante_8h.html#4e266faa65b920356441404c5c423272">SALLE</a>)
<a name="l00703"></a>00703   { 
<a name="l00704"></a>00704     <span class="keywordflow">if</span> ((plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.pjoueur_joueur!=pj_joueur) &amp;&amp; (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.pjoueur_joueur != NULL))
<a name="l00705"></a>00705     {
<a name="l00706"></a>00706       <span class="comment">//on lui affiche un message lui indiquant ce qu'il paye et a qui</span>
<a name="l00707"></a>00707       sprintf(message, <span class="stringliteral">"Vous êtes chez %s : vous payer le loyer %d Fintz"</span>, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.pjoueur_joueur-&gt;str_nom, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_prix/10*(plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_niveau+1));
<a name="l00708"></a>00708       <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"Loyer"</span>,message,<a class="code" href="constante_8h.html#053cae792dc14f665c1787b2f12b2759">MESSAGE_NORMAL</a>);
<a name="l00709"></a>00709     }
<a name="l00710"></a>00710     <span class="keywordflow">else</span> 
<a name="l00711"></a>00711     {
<a name="l00712"></a>00712       <a class="code" href="interaction_8c.html#3bf12a3fb5664e0581318e25e4ec2f58">attente_validation_propriete</a>(surf_ecran, plateau, surf_centre, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>],pj_joueur, action_possible_resultat);
<a name="l00713"></a>00713     }
<a name="l00714"></a>00714   }
<a name="l00715"></a>00715   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a>==<a class="code" href="constante_8h.html#c8a17d7f3309f612556a9ad89c065155">BUREAU_KRYSTEL</a>)
<a name="l00716"></a>00716   {
<a name="l00717"></a>00717     <span class="comment">//le joueur tire une carte et agit en fonction d'elle</span>
<a name="l00718"></a>00718     <a class="code" href="traitement_8c.html#be19ec4331bcef51ef67b4a083f5f1db">traitement_bureau</a>(surf_ecran,surf_centre,plateau, pj_joueur,bureau_de_krystel,bureau_de_krystel, bureau_de_nadege,<a class="code" href="constante_8h.html#c8a17d7f3309f612556a9ad89c065155">BUREAU_KRYSTEL</a>);
<a name="l00719"></a>00719     <span class="comment">//reculer_jeton(surf_ecran, surf_centre, pj_joueur,plateau,bureau_de_krystel, bureau_de_nadege);</span>
<a name="l00720"></a>00720   }
<a name="l00721"></a>00721   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a>==<a class="code" href="constante_8h.html#08de010d0cea646b8bbb7ded84bec89b">BUREAU_NADEGE</a>)
<a name="l00722"></a>00722   {
<a name="l00723"></a>00723     <span class="comment">//le joueur tire une carte et agit en fonction d'elle</span>
<a name="l00724"></a>00724     <a class="code" href="traitement_8c.html#be19ec4331bcef51ef67b4a083f5f1db">traitement_bureau</a>(surf_ecran,surf_centre,plateau, pj_joueur,bureau_de_nadege, bureau_de_krystel, bureau_de_nadege,<a class="code" href="constante_8h.html#08de010d0cea646b8bbb7ded84bec89b">BUREAU_NADEGE</a>);
<a name="l00725"></a>00725   } 
<a name="l00726"></a>00726   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a>==<a class="code" href="constante_8h.html#37d0262bca8759aebef506663da32f4f">SP_BUREAU_LAURENCE</a>)
<a name="l00727"></a>00727   {
<a name="l00728"></a>00728     <a class="code" href="traitement_8c.html#254f5e87b0380c79a01aaf444c6aff9e">traitement_bureau_laurence</a>(surf_ecran, surf_centre, plateau, pj_joueur, bureau_de_krystel, bureau_de_nadege);
<a name="l00729"></a>00729   }
<a name="l00730"></a>00730   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#fc3248815d7e95d7720016a9bdff4912">SP_TABLEAU</a>)
<a name="l00731"></a>00731   {
<a name="l00732"></a>00732     <span class="comment">//on envoi le joueur directement en prison</span>
<a name="l00733"></a>00733     <a class="code" href="traitement_8c.html#179b66f3e6586b6640e89be8fa1f86f0">aller_en_prison_jeton</a>(surf_ecran, pj_joueur,plateau);
<a name="l00734"></a>00734   }
<a name="l00735"></a>00735   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#73652011835007bc4ec45884fc94cc28">SP_MACHINE_CAFE</a>) 
<a name="l00736"></a>00736   {
<a name="l00737"></a>00737     <span class="comment">//le joueur récolte l'argent de la machine a café</span>
<a name="l00738"></a>00738     <a class="code" href="traitement_8c.html#af4566e5dd13d5a2ecc63bb86ddd8567">traitement_machine_a_cafe</a>(surf_ecran, surf_centre, plateau, pj_joueur);
<a name="l00739"></a>00739   }
<a name="l00740"></a>00740   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#4d7b4db634fc7099a86ebb0ce4fcfaf6">SOIREE_GALA</a> || plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#63930fef1b459edd3f8abb747d3f43b4">SOIREE_AREA</a>)  
<a name="l00741"></a>00741   {
<a name="l00742"></a>00742     <a class="code" href="traitement_8c.html#41c5c48babb69e4ed2112ea2b4b4135f">traitement_soiree</a>(surf_ecran, surf_centre ,pj_joueur, plateau);
<a name="l00743"></a>00743   }
<a name="l00744"></a>00744   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (  (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#d6374d072f3b90625b387149b6059452">LC_WC</a>)
<a name="l00745"></a>00745       || (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#fffd46a61b11e88ee78aadff949e1f4d">LC_ASCENSEUR</a>)
<a name="l00746"></a>00746       || (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#9b30d8e1e34829a936da477e94b5e376">LC_RU</a>)
<a name="l00747"></a>00747       || (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#a55f3cedf3fd4b2510c1bb0b805facbf">LC_PARKING</a>))
<a name="l00748"></a>00748   {
<a name="l00749"></a>00749     <span class="comment">//si la case appartient a un adversaire</span>
<a name="l00750"></a>00750     <span class="keywordflow">if</span> ((plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur!=pj_joueur) &amp;&amp; (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur != NULL))
<a name="l00751"></a>00751     {
<a name="l00752"></a>00752       <span class="comment">//on prépare le message et il paye en même temps</span>
<a name="l00753"></a>00753       sprintf(message, <span class="stringliteral">"Vous êtes chez %s : vous payer le loyer %d Fintz"</span>, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur-&gt;str_nom, <a class="code" href="traitement_8c.html#75826dfc26c45fb35071e334a0d1a6a6">traitement_loyer_lieu_commun</a>(plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur));
<a name="l00754"></a>00754       <span class="comment">//on lui fait payer le loyer en fonction du nombre de </span>
<a name="l00755"></a>00755       <a class="code" href="traitement_8c.html#c348a8e35a81c8d0e00e947478e06fb6">traitement_payer_loyer</a>(pj_joueur, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur, <a class="code" href="traitement_8c.html#75826dfc26c45fb35071e334a0d1a6a6">traitement_loyer_lieu_commun</a>(plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur));
<a name="l00756"></a>00756       <span class="comment">//on affiche le message</span>
<a name="l00757"></a>00757       <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"Loyer"</span>,message,<a class="code" href="constante_8h.html#053cae792dc14f665c1787b2f12b2759">MESSAGE_NORMAL</a>);
<a name="l00758"></a>00758     }
<a name="l00759"></a>00759     <span class="keywordflow">else</span> 
<a name="l00760"></a>00760     {
<a name="l00761"></a>00761       <a class="code" href="interaction_8c.html#3bf12a3fb5664e0581318e25e4ec2f58">attente_validation_propriete</a>(surf_ecran,plateau, surf_centre, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>],pj_joueur, action_possible_resultat);
<a name="l00762"></a>00762     }
<a name="l00763"></a>00763   }
<a name="l00764"></a>00764   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (  (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#0ad5592728506d2c7a17844fa23df7d8">BDE</a>)
<a name="l00765"></a>00765       || (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#c4176015f152fb7416bc61129a3825f7">BDS</a>))
<a name="l00766"></a>00766   {
<a name="l00767"></a>00767     <span class="comment">//si la case appartient à un adversaire</span>
<a name="l00768"></a>00768     <span class="keywordflow">if</span> ((plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur!=pj_joueur) &amp;&amp; (plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur != NULL))
<a name="l00769"></a>00769     {
<a name="l00770"></a>00770       <span class="comment">//on prépare le message</span>
<a name="l00771"></a>00771       sprintf(message, <span class="stringliteral">"Vous êtes chez %s : vous payer le loyer %d Fintz"</span>, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur-&gt;str_nom, <a class="code" href="traitement_8c.html#bdfc1ebd2d8ecfcd5d3b01937f529839">traitement_loyer_association</a>(plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur, int_nombre_tire));
<a name="l00772"></a>00772       <span class="comment">//il paye</span>
<a name="l00773"></a>00773       <a class="code" href="traitement_8c.html#c348a8e35a81c8d0e00e947478e06fb6">traitement_payer_loyer</a>(pj_joueur, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur,<a class="code" href="traitement_8c.html#bdfc1ebd2d8ecfcd5d3b01937f529839">traitement_loyer_association</a>(plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur, int_nombre_tire));
<a name="l00774"></a>00774       
<a name="l00775"></a>00775       <span class="comment">//on affiche le message</span>
<a name="l00776"></a>00776       <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"Loyer"</span>,message,<a class="code" href="constante_8h.html#053cae792dc14f665c1787b2f12b2759">MESSAGE_NORMAL</a>);
<a name="l00777"></a>00777     }
<a name="l00778"></a>00778     <span class="keywordflow">else</span> 
<a name="l00779"></a>00779     {
<a name="l00780"></a>00780       <a class="code" href="interaction_8c.html#3bf12a3fb5664e0581318e25e4ec2f58">attente_validation_propriete</a>(surf_ecran,plateau, surf_centre, plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>],pj_joueur, action_possible_resultat);
<a name="l00781"></a>00781     }
<a name="l00782"></a>00782     
<a name="l00783"></a>00783   }
<a name="l00784"></a>00784 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="12c087ef5d94868443731b4c92032e14"></a><!-- doxytag: member="traitement.h::traitement_elimination_joueur" ref="12c087ef5d94868443731b4c92032e14" args="(joueur *joueur_eliminer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traitement_elimination_joueur           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>joueur_eliminer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
libère les propriété et l'espace mémoire du joueur et de ses possessions 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>joueur_eliminer</em>&nbsp;</td><td>le joueur à éliminer</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00994">994</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l01063">traitement_perdu()</a>.<div class="fragment"><pre class="fragment"><a name="l00994"></a>00994 {
<a name="l00995"></a>00995   <a class="code" href="structpossession.html">possession</a>* propriete_joueur_encours;
<a name="l00996"></a>00996   <a class="code" href="structpossession.html">possession</a>* propriete_joueur_precedent;
<a name="l00997"></a>00997   <a class="code" href="structjoueur.html">joueur</a>* pj_joueur_precedent;
<a name="l00998"></a>00998   <a class="code" href="structjoueur.html">joueur</a>* pj_joueur_encours;
<a name="l00999"></a>00999   
<a name="l01000"></a>01000   propriete_joueur_encours=joueur_eliminer-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>;
<a name="l01001"></a>01001   
<a name="l01002"></a>01002   <span class="comment">//il faut libérer tous les propriétés du joueur</span>
<a name="l01003"></a>01003   <span class="comment">//pour chaque propriété du joueur</span>
<a name="l01004"></a>01004   <span class="keywordflow">while</span> (propriete_joueur_encours != NULL)
<a name="l01005"></a>01005   {
<a name="l01006"></a>01006     <span class="comment">//on test le type de la case</span>
<a name="l01007"></a>01007     <span class="keywordflow">switch</span> (propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a>)
<a name="l01008"></a>01008     {
<a name="l01009"></a>01009       <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#4e266faa65b920356441404c5c423272">SALLE</a>: 
<a name="l01010"></a>01010         <span class="comment">//la case n'a plus de propriétère</span>
<a name="l01011"></a>01011         propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.pjoueur_joueur=NULL;
<a name="l01012"></a>01012         <span class="comment">//la case n'a plus de maison</span>
<a name="l01013"></a>01013         propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_niveau=0;
<a name="l01014"></a>01014         <span class="keywordflow">break</span>;
<a name="l01015"></a>01015       <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#0ad5592728506d2c7a17844fa23df7d8">BDE</a>:
<a name="l01016"></a>01016         <span class="comment">//la case n'a plus de propriétère</span>
<a name="l01017"></a>01017         propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur=NULL;
<a name="l01018"></a>01018         <span class="keywordflow">break</span>;
<a name="l01019"></a>01019       <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#c4176015f152fb7416bc61129a3825f7">BDS</a>:
<a name="l01020"></a>01020         <span class="comment">//la case n'a plus de propriétère</span>
<a name="l01021"></a>01021         propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#85a20ebff9fbdbf9edb6beffa041ca23">case_association</a>.pjoueur_joueur=NULL;
<a name="l01022"></a>01022         <span class="keywordflow">break</span>;
<a name="l01023"></a>01023       <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#d6374d072f3b90625b387149b6059452">LC_WC</a>:
<a name="l01024"></a>01024         <span class="comment">//la case n'a plus de propriétère</span>
<a name="l01025"></a>01025         propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur=NULL;
<a name="l01026"></a>01026         <span class="keywordflow">break</span>;
<a name="l01027"></a>01027       <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#a55f3cedf3fd4b2510c1bb0b805facbf">LC_PARKING</a>:
<a name="l01028"></a>01028         <span class="comment">//la case n'a plus de propriétère</span>
<a name="l01029"></a>01029         propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur=NULL;
<a name="l01030"></a>01030         <span class="keywordflow">break</span>;
<a name="l01031"></a>01031       <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#9b30d8e1e34829a936da477e94b5e376">LC_RU</a>:
<a name="l01032"></a>01032         <span class="comment">//la case n'a plus de propriétère</span>
<a name="l01033"></a>01033         propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur=NULL;
<a name="l01034"></a>01034         <span class="keywordflow">break</span>;
<a name="l01035"></a>01035       <span class="keywordflow">case</span> <a class="code" href="constante_8h.html#fffd46a61b11e88ee78aadff949e1f4d">LC_ASCENSEUR</a>:
<a name="l01036"></a>01036         <span class="comment">//la case n'a plus de propriétère</span>
<a name="l01037"></a>01037         propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#f1240a8ba861b5871a50cdb7e5039a1e">case_lieu_commun</a>.pjoueur_joueur=NULL;
<a name="l01038"></a>01038         <span class="keywordflow">break</span>;
<a name="l01039"></a>01039       <span class="keywordflow">default</span>:
<a name="l01040"></a>01040         <span class="keywordflow">break</span>;
<a name="l01041"></a>01041     }
<a name="l01042"></a>01042     
<a name="l01043"></a>01043     propriete_joueur_precedent = propriete_joueur_encours;
<a name="l01044"></a>01044     propriete_joueur_encours = propriete_joueur_encours-&gt;<a class="code" href="structpossession.html#d2cf0b1aadb1a869c82c6720dfbc9e36">suivant</a>;
<a name="l01045"></a>01045     <span class="keyword">delete</span> propriete_joueur_precedent;
<a name="l01046"></a>01046   }
<a name="l01047"></a>01047   <span class="comment">//ensuite on libère la place en mémoire du joueur</span>
<a name="l01048"></a>01048   <span class="comment">//on trouve le joueur précédent celui éliminer</span>
<a name="l01049"></a>01049   pj_joueur_precedent=joueur_eliminer;
<a name="l01050"></a>01050   pj_joueur_encours=joueur_eliminer-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l01051"></a>01051   
<a name="l01052"></a>01052   <span class="keywordflow">while</span> (pj_joueur_encours != joueur_eliminer)
<a name="l01053"></a>01053   {
<a name="l01054"></a>01054     pj_joueur_precedent=pj_joueur_encours;
<a name="l01055"></a>01055     pj_joueur_encours=pj_joueur_encours-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l01056"></a>01056   }
<a name="l01057"></a>01057   pj_joueur_precedent-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>=joueur_eliminer-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l01058"></a>01058   
<a name="l01059"></a>01059   <span class="keyword">delete</span> joueur_eliminer;
<a name="l01060"></a>01060 }
<a name="l01061"></a>01061 
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="af4566e5dd13d5a2ecc63bb86ddd8567"></a><!-- doxytag: member="traitement.h::traitement_machine_a_cafe" ref="af4566e5dd13d5a2ecc63bb86ddd8567" args="(SDL_Surface *surf_ecran, SDL_Surface *surf_centre, cases **plateau, joueur *pj_joueur)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traitement_machine_a_cafe           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_centre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
donne au joueur l'argent de la machine à café 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>surf_centre</em>&nbsp;</td><td>surface centrale du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00806">806</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00694">traitement_arrive_case()</a>.<div class="fragment"><pre class="fragment"><a name="l00807"></a>00807 {
<a name="l00808"></a>00808   <span class="keywordtype">char</span> message[128];
<a name="l00809"></a>00809   
<a name="l00810"></a>00810   <span class="comment">//on donne l'argent au joueur</span>
<a name="l00811"></a>00811   pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>+plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent;
<a name="l00812"></a>00812   sprintf(message,<span class="stringliteral">"Vous recevez %d Fintz de la machine à café"</span>, plateau[20]-&gt;machine_a_cafe.<a class="code" href="structcases.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>);
<a name="l00813"></a>00813   <span class="comment">//on vide la machine a café</span>
<a name="l00814"></a>00814   plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent=0;
<a name="l00815"></a>00815   
<a name="l00816"></a>00816   
<a name="l00817"></a>00817   
<a name="l00818"></a>00818   <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"Machine à café"</span>,message,<a class="code" href="constante_8h.html#053cae792dc14f665c1787b2f12b2759">MESSAGE_NORMAL</a>);
<a name="l00819"></a>00819   
<a name="l00820"></a>00820 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="be19ec4331bcef51ef67b4a083f5f1db"></a><!-- doxytag: member="traitement.h::traitement_bureau" ref="be19ec4331bcef51ef67b4a083f5f1db" args="(SDL_Surface *surf_ecran, SDL_Surface *surf_centre, cases **plateau, joueur *pj_joueur, information *le_bureau[16], information *bureau_de_krystel[16], information *bureau_de_nadege[16], int int_id_bureau)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traitement_bureau           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_centre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>le_bureau</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_krystel</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_nadege</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>int_id_bureau</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
tire une carte du bureau voulue et effectue le traitement en fonction de la carte tirée 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>surf_centre</em>&nbsp;</td><td>surface centrale du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>le_bureau</em>&nbsp;</td><td>tableau des cartes bureau à utiliser </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_krystel</em>&nbsp;</td><td>tableau des cartes bureau de krystel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_nadege</em>&nbsp;</td><td>tableau des cartes bureau de nadège </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int_id_bureau</em>&nbsp;</td><td>id du bureau à utiliser</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00888">888</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00694">traitement_arrive_case()</a>, et <a class="el" href="traitement_8c-source.html#l00888">traitement_bureau()</a>.<div class="fragment"><pre class="fragment"><a name="l00888"></a>00888 {
<a name="l00889"></a>00889   <a class="code" href="structinformation.html">information</a>* carte;
<a name="l00890"></a>00890   <a class="code" href="structjoueur.html">joueur</a>* pjoueur_encours;
<a name="l00891"></a>00891   <a class="code" href="structpossession.html">possession</a>* propriete_encours;
<a name="l00892"></a>00892   <span class="keywordtype">int</span> i;
<a name="l00893"></a>00893   <span class="keywordtype">int</span> k;
<a name="l00894"></a>00894   
<a name="l00895"></a>00895   k=0;
<a name="l00896"></a>00896   
<a name="l00897"></a>00897   <span class="comment">//on traite toute cette partie avec la première carte du tableau</span>
<a name="l00898"></a>00898   
<a name="l00899"></a>00899   <span class="keywordflow">if</span> (int_id_bureau == <a class="code" href="constante_8h.html#c8a17d7f3309f612556a9ad89c065155">BUREAU_KRYSTEL</a>)
<a name="l00900"></a>00900   {
<a name="l00901"></a>00901     <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"Bureau de Krystel"</span>,le_bureau[0]-&gt;texte,<a class="code" href="constante_8h.html#d23b08a64916575728c7d84e8548d070">MESSAGE_KRYSTEL</a>);
<a name="l00902"></a>00902   }
<a name="l00903"></a>00903   <span class="keywordflow">else</span> 
<a name="l00904"></a>00904   {
<a name="l00905"></a>00905     <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"Bureau de Nadege"</span>,le_bureau[0]-&gt;texte,<a class="code" href="constante_8h.html#0e055cedb0d436c3589e18d019be1779">MESSAGE_NADEGE</a>);
<a name="l00906"></a>00906   }
<a name="l00907"></a>00907   
<a name="l00908"></a>00908   <span class="comment">//traitement selon la carte</span>
<a name="l00909"></a>00909   <span class="keywordflow">if</span> (le_bureau[0]-&gt;type == <a class="code" href="constante_8h.html#daff423f9e1bdafe7cff410d236e0cea">ARGENT</a>)
<a name="l00910"></a>00910   {
<a name="l00911"></a>00911     <span class="comment">//ajoute ou enlève de l'argent au joueur</span>
<a name="l00912"></a>00912     pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>+le_bureau[0]-&gt;<a class="code" href="structinformation.html#8e030c012e3b74a6d076739c4c7ecb69">valeur</a>;
<a name="l00913"></a>00913     <span class="comment">//on ajoute l'argent à la machine a café</span>
<a name="l00914"></a>00914     plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent=plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent-le_bureau[0]-&gt;<a class="code" href="structinformation.html#8e030c012e3b74a6d076739c4c7ecb69">valeur</a>;
<a name="l00915"></a>00915   }
<a name="l00916"></a>00916   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(le_bureau[0]-&gt;type == <a class="code" href="constante_8h.html#440f0e10bb28b153f5661c934bc6b89f">POSITION</a>)
<a name="l00917"></a>00917   {
<a name="l00918"></a>00918     <span class="keywordflow">if</span> (le_bureau[0]-&gt;valeur &lt; 0)
<a name="l00919"></a>00919     {
<a name="l00920"></a>00920       <a class="code" href="traitement_8c.html#f11f5db54dce465104914610020b7786">reculer_jeton</a>(surf_ecran, surf_centre, pj_joueur,plateau,bureau_de_krystel, bureau_de_nadege);
<a name="l00921"></a>00921     }
<a name="l00922"></a>00922     <span class="keywordflow">else</span>
<a name="l00923"></a>00923     {
<a name="l00924"></a>00924       <span class="comment">//on avance le jeton jusqu'a la case voulue</span>
<a name="l00925"></a>00925       <a class="code" href="traitement_8c.html#92076f8887242815786ee757fa20f20c">aller_a_jeton</a>(surf_ecran, surf_centre, le_bureau[0]-&gt;valeur, pj_joueur,plateau,bureau_de_krystel, bureau_de_nadege,<a class="code" href="constante_8h.html#62249e384b997229a3e2ae74ade334e2">DELAY</a>/3);
<a name="l00926"></a>00926     }
<a name="l00927"></a>00927   }
<a name="l00928"></a>00928   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(le_bureau[0]-&gt;type == <a class="code" href="constante_8h.html#f7e222f5382da6a6e5e4d47e7dfae2e8">ASTRID</a>)
<a name="l00929"></a>00929   {
<a name="l00930"></a>00930     <a class="code" href="traitement_8c.html#be19ec4331bcef51ef67b4a083f5f1db">traitement_bureau</a>(surf_ecran,surf_centre,plateau, pj_joueur,bureau_de_nadege, bureau_de_krystel, bureau_de_nadege,<a class="code" href="constante_8h.html#08de010d0cea646b8bbb7ded84bec89b">BUREAU_NADEGE</a>);
<a name="l00931"></a>00931   }
<a name="l00932"></a>00932   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(le_bureau[0]-&gt;type == <a class="code" href="constante_8h.html#21c21e5a4f28b6d1d2c2eb8400e8a6d8">ANNIVERSAIRE</a>)
<a name="l00933"></a>00933   {
<a name="l00934"></a>00934     pjoueur_encours=pj_joueur-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00935"></a>00935     <span class="comment">//on prend l'argent à chaque joueur et on le donne à l'actuel</span>
<a name="l00936"></a>00936     <span class="keywordflow">while</span> (pjoueur_encours != pj_joueur)
<a name="l00937"></a>00937     {
<a name="l00938"></a>00938       pjoueur_encours-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> = pjoueur_encours-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>-le_bureau[0]-&gt;<a class="code" href="structinformation.html#8e030c012e3b74a6d076739c4c7ecb69">valeur</a>;
<a name="l00939"></a>00939       k++;
<a name="l00940"></a>00940       pjoueur_encours=pjoueur_encours-&gt;<a class="code" href="structjoueur.html#c1e6e55655821e532f1c4e6d67fc8d64">pjoueur_suivant</a>;
<a name="l00941"></a>00941     }
<a name="l00942"></a>00942     <span class="comment">//on donne l'argent récolté au joueur</span>
<a name="l00943"></a>00943     pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> = pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>+((le_bureau[0]-&gt;<a class="code" href="structinformation.html#8e030c012e3b74a6d076739c4c7ecb69">valeur</a>)*k);     
<a name="l00944"></a>00944   }
<a name="l00945"></a>00945   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(le_bureau[0]-&gt;type == <a class="code" href="constante_8h.html#638bf3f8f1ba052f77658ee8cde894a0">CTI</a>)
<a name="l00946"></a>00946   { 
<a name="l00947"></a>00947     propriete_encours=pj_joueur-&gt;<a class="code" href="structjoueur.html#90b8cedf328ed1f09cfafc9627146043">propriete</a>; 
<a name="l00948"></a>00948     <span class="comment">//on regarde chaque propriété du joueur</span>
<a name="l00949"></a>00949     
<a name="l00950"></a>00950     k=0;
<a name="l00951"></a>00951     
<a name="l00952"></a>00952     <span class="keywordflow">while</span> (propriete_encours != NULL)
<a name="l00953"></a>00953     {
<a name="l00954"></a>00954       <span class="keywordflow">if</span> (propriete_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#9e5cc6f5098bf7a5daebf7fff66ae4ff">int_type</a> == <a class="code" href="constante_8h.html#4e266faa65b920356441404c5c423272">SALLE</a>)
<a name="l00955"></a>00955       {
<a name="l00956"></a>00956         k=k+(propriete_encours-&gt;<a class="code" href="structpossession.html#5e54d7b40815342bfd51737d5a96d620">propriete</a>-&gt;<a class="code" href="structcases.html#7eee361afdf3c3cde3a6c8368ef4fba5">case_salle</a>.int_niveau)-1;    
<a name="l00957"></a>00957         propriete_encours=propriete_encours-&gt;<a class="code" href="structpossession.html#d2cf0b1aadb1a869c82c6720dfbc9e36">suivant</a>;   
<a name="l00958"></a>00958       }
<a name="l00959"></a>00959     }
<a name="l00960"></a>00960     <span class="comment">//on retire l'argent au joueur</span>
<a name="l00961"></a>00961     pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> = pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>+(-(le_bureau[0]-&gt;<a class="code" href="structinformation.html#8e030c012e3b74a6d076739c4c7ecb69">valeur</a>)*k);    
<a name="l00962"></a>00962     <span class="comment">//on l'ajoute à la machine à café</span>
<a name="l00963"></a>00963     plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent=plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent-(-(le_bureau[0]-&gt;<a class="code" href="structinformation.html#8e030c012e3b74a6d076739c4c7ecb69">valeur</a>)*k);
<a name="l00964"></a>00964   }
<a name="l00965"></a>00965   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (le_bureau[0]-&gt;type == <a class="code" href="constante_8h.html#e1273ba66c54e716e0537edd7cb8dc65">CARTE_LAURENCE</a>)
<a name="l00966"></a>00966   {
<a name="l00967"></a>00967     <span class="comment">//on envoie le joueur directement en prison</span>
<a name="l00968"></a>00968     <a class="code" href="traitement_8c.html#179b66f3e6586b6640e89be8fa1f86f0">aller_en_prison_jeton</a>(surf_ecran, pj_joueur, plateau);
<a name="l00969"></a>00969   }
<a name="l00970"></a>00970   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(le_bureau[0]-&gt;type == <a class="code" href="constante_8h.html#8248bf65629aa0fb737cd2a960bd0b40">CERTIFICAT</a>)
<a name="l00971"></a>00971   {
<a name="l00972"></a>00972     <span class="comment">//le joueur possède un certificat de plus</span>
<a name="l00973"></a>00973     pj_joueur-&gt;<a class="code" href="structjoueur.html#ecbece39087923f999df36d5107d3dee">int_certificat</a>++;
<a name="l00974"></a>00974   }
<a name="l00975"></a>00975   
<a name="l00976"></a>00976   <span class="comment">//puis on remet la carte à la fin du tableau</span>
<a name="l00977"></a>00977 
<a name="l00978"></a>00978   carte=le_bureau[0];
<a name="l00979"></a>00979 
<a name="l00980"></a>00980   <span class="keywordflow">for</span> (i = 0; i &lt; 15; i++)
<a name="l00981"></a>00981   {
<a name="l00982"></a>00982     le_bureau[i]=le_bureau[i+1];
<a name="l00983"></a>00983     le_bureau[15]=carte;
<a name="l00984"></a>00984   }
<a name="l00985"></a>00985   <span class="comment">//si le solde du joueur devient négatif il perd</span>
<a name="l00986"></a>00986   <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> &lt; 0)
<a name="l00987"></a>00987   {
<a name="l00988"></a>00988     <a class="code" href="traitement_8c.html#f8722e066ea3e80427909d9efbe1b0b6">traitement_perdu</a>(pj_joueur);
<a name="l00989"></a>00989   }
<a name="l00990"></a>00990   
<a name="l00991"></a>00991 }
<a name="l00992"></a>00992 
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="41c5c48babb69e4ed2112ea2b4b4135f"></a><!-- doxytag: member="traitement.h::traitement_soiree" ref="41c5c48babb69e4ed2112ea2b4b4135f" args="(SDL_Surface *surf_ecran, SDL_Surface *surf_centre, joueur *pj_joueur, cases **plateau)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traitement_soiree           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_centre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
fait payer le joueur suivant la case soirée sur laquelle il est 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>surf_centre</em>&nbsp;</td><td>surface centrale du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<dl class="return" compact><dt><b>Renvoie:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00786">786</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00694">traitement_arrive_case()</a>.<div class="fragment"><pre class="fragment"><a name="l00787"></a>00787 {
<a name="l00788"></a>00788   <span class="comment">//le joueur peut-être soit sur le gala soit sur l'area</span>
<a name="l00789"></a>00789   <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>==38)
<a name="l00790"></a>00790   {
<a name="l00791"></a>00791     <span class="comment">//le joueur se trouve à la soirée du gala</span>
<a name="l00792"></a>00792     <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"Cotisation pour le Gala"</span>,<span class="stringliteral">"Payez 1500 Fintz"</span>,<a class="code" href="constante_8h.html#053cae792dc14f665c1787b2f12b2759">MESSAGE_NORMAL</a>);
<a name="l00793"></a>00793   }
<a name="l00794"></a>00794   <span class="keywordflow">else</span> 
<a name="l00795"></a>00795   {
<a name="l00796"></a>00796     <span class="comment">//le joueur se trouve sur la case area</span>
<a name="l00797"></a>00797     <a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"Soirée à l'Area !"</span>,<span class="stringliteral">"Payez 1500 Fintz"</span>,<a class="code" href="constante_8h.html#053cae792dc14f665c1787b2f12b2759">MESSAGE_NORMAL</a>);
<a name="l00798"></a>00798   }
<a name="l00799"></a>00799   <span class="comment">//on retire au joueur l'argent</span>
<a name="l00800"></a>00800   pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> - plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#aea3fd404e9de12a19bafac99f8f8eb3">case_soiree</a>.int_prix;
<a name="l00801"></a>00801   <span class="comment">//on ajoute l'argent à la machine a café</span>
<a name="l00802"></a>00802   plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent=plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent + plateau[pj_joueur-&gt;<a class="code" href="structjoueur.html#47d7b57cd189c4324a0bc8b338aec618">int_position</a>]-&gt;<a class="code" href="structcases.html#aea3fd404e9de12a19bafac99f8f8eb3">case_soiree</a>.int_prix;
<a name="l00803"></a>00803   
<a name="l00804"></a>00804 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="254f5e87b0380c79a01aaf444c6aff9e"></a><!-- doxytag: member="traitement.h::traitement_bureau_laurence" ref="254f5e87b0380c79a01aaf444c6aff9e" args="(SDL_Surface *surf_ecran, SDL_Surface *surf_centre, cases **plateau, joueur *pj_joueur, information *bureau_de_krystel[16], information *bureau_de_nadege[16])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traitement_bureau_laurence           </td>
          <td>(</td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_ecran</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SDL_Surface *&nbsp;</td>
          <td class="paramname"> <em>surf_centre</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcases.html">cases</a> **&nbsp;</td>
          <td class="paramname"> <em>plateau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_krystel</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinformation.html">information</a> *&nbsp;</td>
          <td class="paramname"> <em>bureau_de_nadege</em>[16]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
effectue les traitement necessaire lorsqu'un joueur est dans le bureau de laurence 
<p>
<dl class="author" compact><dt><b>Auteur:</b></dt><dd>Franck Trey &lt;<a href="mailto:franck.trey@eisti.fr">franck.trey@eisti.fr</a>&gt;, Florian Lefevre &lt;<a href="mailto:Florian.lefevre@eisti.fr">Florian.lefevre@eisti.fr</a>&gt;</dd></dl>
<dl compact><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>surf_ecran</em>&nbsp;</td><td>surface de l'écran </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>surf_centre</em>&nbsp;</td><td>surface centrale du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pj_joueur</em>&nbsp;</td><td>joueur qui joue actuellement </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plateau</em>&nbsp;</td><td>tableau contenant les cases du plateau </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_krystel</em>&nbsp;</td><td>tableau des cartes bureau de krystel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bureau_de_nadege</em>&nbsp;</td><td>tableau des cartes bureau de nadège</td></tr>
  </table>
</dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>rien </dd></dl>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l00821">821</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="interaction_8c-source.html#l00011">attente_clic()</a>, et <a class="el" href="traitement_8c-source.html#l00694">traitement_arrive_case()</a>.<div class="fragment"><pre class="fragment"><a name="l00822"></a>00822 {
<a name="l00823"></a>00823   <span class="keywordtype">int</span> int_des;
<a name="l00824"></a>00824   <span class="keywordtype">int</span> int_choix;
<a name="l00825"></a>00825   
<a name="l00826"></a>00826   <span class="comment">//on verifie si le joueur est emprisonner</span>
<a name="l00827"></a>00827   <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#9674676a40014e7c313f37a481b70bb4">bool_laurence</a>==<span class="keyword">true</span>)
<a name="l00828"></a>00828   {
<a name="l00829"></a>00829     <span class="comment">//il lance les dés afin d'essayer de faire un double</span>
<a name="l00830"></a>00830     int_des=<a class="code" href="traitement_8c.html#00fa44e91ea147802f626fed5c5a5e54">lancer_des</a>(surf_ecran, surf_centre,pj_joueur, plateau);
<a name="l00831"></a>00831 
<a name="l00832"></a>00832     <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#383352e8bd61fe737ca01b2ad37da4a4">int_double_tire</a> == 1)
<a name="l00833"></a>00833     {
<a name="l00834"></a>00834       <span class="comment">//le jeton est libéré</span>
<a name="l00835"></a>00835       pj_joueur-&gt;<a class="code" href="structjoueur.html#9674676a40014e7c313f37a481b70bb4">bool_laurence</a>=<span class="keyword">false</span>;
<a name="l00836"></a>00836       pj_joueur-&gt;<a class="code" href="structjoueur.html#a9f44bfa8a4fd3de8b1de51a1c3c2f8e">int_laurence</a>=0;
<a name="l00837"></a>00837       <a class="code" href="traitement_8c.html#5c76676806c77b8f28d8a2af3922f3a6">avancer_jeton</a>(surf_ecran, surf_centre, int_des, pj_joueur,plateau,bureau_de_krystel, bureau_de_nadege);
<a name="l00838"></a>00838     }
<a name="l00839"></a>00839     <span class="comment">//sinon on verifie si les trois tours de prison n'ont pas aboutis</span>
<a name="l00840"></a>00840     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#a9f44bfa8a4fd3de8b1de51a1c3c2f8e">int_laurence</a> == 3)
<a name="l00841"></a>00841     {
<a name="l00842"></a>00842       <span class="comment">//on le libère</span>
<a name="l00843"></a>00843       pj_joueur-&gt;<a class="code" href="structjoueur.html#9674676a40014e7c313f37a481b70bb4">bool_laurence</a>=<span class="keyword">false</span>;
<a name="l00844"></a>00844       pj_joueur-&gt;<a class="code" href="structjoueur.html#a9f44bfa8a4fd3de8b1de51a1c3c2f8e">int_laurence</a>=0;
<a name="l00845"></a>00845       <a class="code" href="traitement_8c.html#5c76676806c77b8f28d8a2af3922f3a6">avancer_jeton</a>(surf_ecran, surf_centre, int_des, pj_joueur,plateau,bureau_de_krystel, bureau_de_nadege);
<a name="l00846"></a>00846     }
<a name="l00847"></a>00847     <span class="keywordflow">else</span> 
<a name="l00848"></a>00848     {
<a name="l00849"></a>00849       int_choix=<a class="code" href="interaction_8c.html#232bfa13a7e55819d63a9cc0d6e475ac">attente_validation_message</a>(surf_ecran,surf_centre,<span class="stringliteral">"Bureau de Laurence"</span>,<span class="stringliteral">"Que vous voulez vous faire ? Tenter vainement un double ? Soudoyer Laurence pour qu'elle vous laisse sortir ? Ou juste faire genre le type qui fait vanne de faire semblant d'être malade gràce au certificat médical ?"</span>,<a class="code" href="constante_8h.html#b53e9686567d4fc59e121af110cbd36b">MESSAGE_PRISON</a>);
<a name="l00850"></a>00850       <span class="keywordflow">switch</span> (int_choix)
<a name="l00851"></a>00851       {
<a name="l00852"></a>00852         <span class="keywordflow">case</span> 4: 
<a name="l00853"></a>00853           <span class="comment">//on indique qu'il a passe un tour de plus</span>
<a name="l00854"></a>00854           pj_joueur-&gt;<a class="code" href="structjoueur.html#a9f44bfa8a4fd3de8b1de51a1c3c2f8e">int_laurence</a>++;
<a name="l00855"></a>00855           <span class="keywordflow">break</span>;
<a name="l00856"></a>00856         <span class="keywordflow">case</span> 5:
<a name="l00857"></a>00857           pj_joueur-&gt;<a class="code" href="structjoueur.html#9674676a40014e7c313f37a481b70bb4">bool_laurence</a>=<span class="keyword">false</span>;
<a name="l00858"></a>00858           pj_joueur-&gt;<a class="code" href="structjoueur.html#a9f44bfa8a4fd3de8b1de51a1c3c2f8e">int_laurence</a>=0;
<a name="l00859"></a>00859           <span class="comment">//on lui fait payer les 500 Fintz à la machine a café</span>
<a name="l00860"></a>00860           <span class="comment">//on retire au joueur l'argent</span>
<a name="l00861"></a>00861           pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a>=pj_joueur-&gt;<a class="code" href="structjoueur.html#b82f4fde3382a41ee393fc1c64f9beb8">int_argent</a> - 500;
<a name="l00862"></a>00862           <span class="comment">//on ajoute l'argent à la machine a café</span>
<a name="l00863"></a>00863           plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent=plateau[20]-&gt;<a class="code" href="structcases.html#74e60b0eaf92bd26ea10e0f65429f776">machine_a_cafe</a>.int_argent + 500;
<a name="l00864"></a>00864           <span class="keywordflow">break</span>;
<a name="l00865"></a>00865         <span class="keywordflow">case</span> 6:
<a name="l00866"></a>00866           <span class="keywordflow">if</span> (pj_joueur-&gt;<a class="code" href="structjoueur.html#ecbece39087923f999df36d5107d3dee">int_certificat</a> &gt; 0)
<a name="l00867"></a>00867             {
<a name="l00868"></a>00868               pj_joueur-&gt;<a class="code" href="structjoueur.html#9674676a40014e7c313f37a481b70bb4">bool_laurence</a>=<span class="keyword">false</span>;
<a name="l00869"></a>00869               pj_joueur-&gt;<a class="code" href="structjoueur.html#a9f44bfa8a4fd3de8b1de51a1c3c2f8e">int_laurence</a>=0;
<a name="l00870"></a>00870               pj_joueur-&gt;<a class="code" href="structjoueur.html#ecbece39087923f999df36d5107d3dee">int_certificat</a>-=1;
<a name="l00871"></a>00871             }
<a name="l00872"></a>00872           <span class="keywordflow">else</span>
<a name="l00873"></a>00873             {
<a name="l00874"></a>00874               <span class="comment">//on indique qu'il a passe un tour de plus</span>
<a name="l00875"></a>00875               pj_joueur-&gt;<a class="code" href="structjoueur.html#a9f44bfa8a4fd3de8b1de51a1c3c2f8e">int_laurence</a>++;
<a name="l00876"></a>00876             }
<a name="l00877"></a>00877           <span class="keywordflow">break</span>;
<a name="l00878"></a>00878         <span class="keywordflow">default</span>: 
<a name="l00879"></a>00879           <span class="keywordflow">break</span>;
<a name="l00880"></a>00880       }
<a name="l00881"></a>00881       
<a name="l00882"></a>00882     }
<a name="l00883"></a>00883   }
<a name="l00884"></a>00884 }
<a name="l00885"></a>00885 
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f8722e066ea3e80427909d9efbe1b0b6"></a><!-- doxytag: member="traitement.h::traitement_perdu" ref="f8722e066ea3e80427909d9efbe1b0b6" args="(joueur *pj_joueur)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traitement_perdu           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjoueur.html">joueur</a> *&nbsp;</td>
          <td class="paramname"> <em>pj_joueur</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Définition à la ligne <a class="el" href="traitement_8c-source.html#l01063">1063</a> du fichier <a class="el" href="traitement_8c-source.html">traitement.c</a>.
<p>
Référencé par <a class="el" href="traitement_8c-source.html#l00888">traitement_bureau()</a>.<div class="fragment"><pre class="fragment"><a name="l01063"></a>01063 {
<a name="l01064"></a>01064   <span class="comment">//on affiche le message</span>
<a name="l01065"></a>01065   
<a name="l01066"></a>01066   <span class="comment">//on l'élimine</span>
<a name="l01067"></a>01067   <a class="code" href="traitement_8c.html#12c087ef5d94868443731b4c92032e14">traitement_elimination_joueur</a>(pj_joueur);
<a name="l01068"></a>01068 }
<a name="l01069"></a>01069 }
</pre></div>
<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Généré le Thu Jan 10 16:53:22 2008 pour Correction des TPs par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
